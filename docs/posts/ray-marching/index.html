<!DOCTYPE html>



<html lang="en" 
  
    mode="dark"
  
>

  <!--
  The Head
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme" content="Chirpy v2.7.2">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="레이 마칭(Ray Marching)" />
<meta name="author" content="Rito15" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="레이 마칭이란?" />
<meta property="og:description" content="레이 마칭이란?" />
<link rel="canonical" href="https://rito15.github.io/posts/ray-marching/" />
<meta property="og:url" content="https://rito15.github.io/posts/ray-marching/" />
<meta property="og:site_name" content="Rito15" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-19T23:15:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="레이 마칭(Ray Marching)" />
<meta name="google-site-verification" content="google_meta_tag_verification" />
<script type="application/ld+json">
{"headline":"레이 마칭(Ray Marching)","description":"레이 마칭이란?","dateModified":"2021-07-06T03:54:31+09:00","datePublished":"2021-01-19T23:15:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rito15.github.io/posts/ray-marching/"},"url":"https://rito15.github.io/posts/ray-marching/","author":{"@type":"Person","name":"Rito15"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <title>레이 마칭(Ray Marching) | Rito15
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2019 Cotes Chung
  Published under the MIT license
-->



<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">

<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- GA -->
  

  <!-- jsDelivr CDN -->
  <link rel="preconnect" href="cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="cdn.jsdelivr.net">

  <!-- Bootstrap -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous">

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"
    integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ="
    crossorigin="anonymous">

  <!--
  CSS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->






<link rel="preload" href="/assets/css/post.css" as="style">
<link rel="stylesheet" href="/assets/css/post.css">


  
    <link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css">
    <link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" />
  



  <!-- JavaScripts -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

  <script defer
    src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>

  <!--
  JS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->





<script async src="/assets/js/post.min.js"></script>


  <!-- MathJax -->
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>





</head>


  <body data-spy="scroll" data-target="#toc">

    <!--
  The Side Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="sidebar" class="d-flex flex-column align-items-end">

  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" alt="avatar" class="mx-auto">
        
        <img src="/assets/img/favicons/android-icon-192x192.png" alt="avatar" onerror="this.style.display='none'">
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="/">Rito15</a>
    </div>

    <div class="site-subtitle font-italic">Unity Csharp Developer</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">
    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/tabs/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/tags/" class="nav-link">
        <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i>
        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/about/" class="nav-link">
        <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center">

    
      

      
      <a href="https://github.com/rito15" aria-label="github"
        
        target="_blank" rel="noopener">
        <i class="fab fa-github-alt"></i>
      </a>
      

    
      

      
      <a href="
          javascript:location.href = 'mailto:' + ['ghdtkals15','gmail.com'].join('@')" aria-label="email"
        
        >
        <i class="fas fa-envelope"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        
        >
        <i class="fas fa-rss"></i>
      </a>
      

    

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="topbar-wrapper" class="row justify-content-center topbar-down">
  <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    <span id="breadcrumb">
      
        
        <span>
          <a href="/">
            Posts
          </a>
        </span>
        
      

      
        <span>레이 마칭(Ray Marching)</span>
      

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" placeholder="Search...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper">
      <div id="main">

        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->


<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->


<!-- Add attribute 'hide-bullet' to the checkbox list -->




  

  

  <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->
  
  

  

  



<!-- return -->
<div class="row">

  <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">

    <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

      <h1 data-toc-skip>레이 마칭(Ray Marching)</h1>

      <div class="post-meta text-muted d-flex flex-column">
        <!-- Published date and author -->
        <div>
          <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago "
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Tue, Jan 19, 2021, 11:15 PM +0900"
  >

  
  

  
    Jan 19
  

  <i class="unloaded">2021-01-19T23:15:00+09:00</i>

</span>
          by
          <span class="author">
            Rito15
          </span>
        </div>

        <div>
          <!-- lastmod -->
          
          <span>
            Updated
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago lastmod"
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Tue, Jul  6, 2021,  3:54 AM +0900"
  >

  
  

  
    Jul  6
  

  <i class="unloaded">2021-07-06T03:54:31+09:00</i>

</span>
          </span>
          

          <!-- read time -->
          <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->






<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3996 words">22 min</span>


          <!-- page views -->
          

          <!-- HITS -->
          &nbsp;
          <a href="https://hits.seeyoufarm.com"><img min-width="94" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://rito15.github.io/posts/ray-marching/%2F&count_bg=%23AC58FA&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=views&edge_flat=false"/></a> 

        </div>

      </div> <!-- .post-meta -->

      <div class="post-content">

        

        <h1 id="레이-마칭이란">레이 마칭이란?</h1>
<hr />

<ul>
  <li>
    <p>모델의 정점 데이터를 이용하는 기존의 3D 렌더링 방식과는 달리, 레이를 전진시켜(Ray Marching) 카메라로부터 픽셀마다 가장 가까운 오브젝트 표면까지의 거리를 알아내고, 이를 활용해 오브젝트를 그려내는 기법</p>
  </li>
  <li>
    <p>레이 마칭의 모든 오브젝트들은 거리 함수(SDF : Signed Distance Function)로 표면의 정보가 계산된다.</p>
  </li>
  <li>
    <p>SDF의 기초적인 예시 : 구체(Sphere)</p>
  </li>
</ul>

<div class="language-glsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1">// point : 거리를 계산할 기준 좌표</span>
<span class="c1">// center : Sphere의 중심 좌표</span>
<span class="c1">// radius : Sphere의 반지름</span>
<span class="kt">float</span> <span class="nf">sdSphere</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">point</span><span class="p">,</span> <span class="kt">vec3</span> <span class="n">center</span><span class="p">,</span> <span class="kt">float</span> <span class="n">radius</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">point</span> <span class="o">-</span> <span class="n">center</span><span class="p">)</span> <span class="o">-</span> <span class="n">radius</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 위 함수를 통해, 특정 좌표에서 구체의 표면까지의 최단 거리값을 계산할 수 있다.</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<center><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/104993172-ce0bab00-5a65-11eb-9eda-705de2034f17.png" width="500" /></center>

<ul>
  <li>한 점(RO : Ray Origin, 위의 그림에서 Camera)에서 스크린의 모든 픽셀들을 향한 방향(RD : Ray Direction, 위의 그림에서 Camera -&gt; Image)으로 레이 캐스팅을 하여, 각 레이마다 여러 스텝(Step)으로 나누어 레이를 전진시키게 된다.</li>
</ul>

<p><br /></p>

<center> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/104993811-c1d41d80-5a66-11eb-9ad3-a861471cce8e.png" width="500" /> </center>

<blockquote>
  <ul>
    <li>i : 누적 스텝 수</li>
    <li>ro : 카메라의 위치</li>
    <li>rd : 레이의 전진 방향(카메라 -&gt; 스크린의 모든 픽셀)</li>
  </ul>
</blockquote>

<blockquote>
  <ul>
    <li>dO : 현재 스텝까지 레이의 누적 전진 거리</li>
    <li>dS : 이번 스텝에서 전진할 거리(즉, 모든 SDF를 계산했을 때 가장 작은 값)</li>
    <li>p : 레이의 현재 위치</li>
  </ul>
</blockquote>

<blockquote>
  <ul>
    <li>MAX_STEPS : 최대 반복(스텝) 횟수</li>
    <li>SURFACE_DIST : 레이가 표면에 닿았다고 판단할 임계값</li>
    <li>MAX_DIST : 레이가 전진할 수 있는 최대 거리</li>
  </ul>
</blockquote>

<p><br /></p>

<h2 id="각-픽셀에서의-레이마칭거리-계산-과정">각 픽셀에서의 레이마칭(거리 계산) 과정</h2>

<ul>
  <li>
    <p>매 스텝마다, 존재하는 모든 오브젝트들의 SDF를 계산하여 현재 레이의 위치로부터 가장 가까운 물체 표면까지의 거리(dS)를 얻어낸다.</p>
  </li>
  <li>dS가 매우 작으면(dS &lt; SURFACE_DIST) 레이가 오브젝트의 표면에 닿았다고 판단하고, 레이의 전진을 중단한다.</li>
  <li>
    <p>그렇지 않을 경우, 이번 스텝에서 레이를 dS만큼 전진시키고 다음 스텝으로 이어간다.</p>
  </li>
  <li>
    <p>레이의 전진 횟수가 MAX_STEPS에 도달하거나, 레이의 누적 전진 거리(dO)가 MAX_DIST를 넘어서면 해당 픽셀에는 오브젝트의 표면이 존재하지 않는다고 판단하고 레이의 전진을 중단한다.</p>
  </li>
  <li>위 과정을 스크린의 모든 픽셀에 대해 계산하여, 각 픽셀에서 카메라로부터 가장 가까운 오브젝트 표면까지의 거리를 모두 알아낸다.</li>
</ul>

<p><br /></p>

<h1 id="전체-계산-과정">전체 계산 과정</h1>
<hr />

<h3 id="1-거리-계산">[1] 거리 계산</h3>

<ul>
  <li>스크린의 모든 픽셀에 대해 위의 레이마칭 과정을 통해 최단 거리 값을 계산한다.</li>
</ul>

<center><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/104995624-f0072c80-5a69-11eb-9888-15b0f89edd41.png" width="500" /></center>

<h3 id="2-노멀-계산">[2] 노멀 계산</h3>

<ul>
  <li>
    <p>[1]에서 얻어낸 거리값(d)을 이용해, 각 표면의 정확한 3D 공간 상 위치(p = ro + rd * d)를 계산한다.</p>
  </li>
  <li>
    <p>계산된 위치(p)로부터 x, y, z축 방향으로 각각 미세하게 떨어진 위치에서 GetDist() 함수를 통해 가장 가까운 물체 표면까지의 거리를 계산한다.</p>
  </li>
  <li>
    <p>이렇게 얻어낸 3개의 값을 각각 해당 표면에서의 x, y, z 노멀 벡터 성분으로 사용한다.</p>
  </li>
</ul>

<center><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/104995731-1927bd00-5a6a-11eb-8f0b-c63f60abe394.png" width="500" /> </center>

<h3 id="3-라이트directional-light-계산">[3] 라이트(Directional Light) 계산</h3>

<ul>
  <li>픽셀 쉐이더에서의 디퓨즈 계산 방식과 동일하게, 가상 라이트 벡터(L)와 각 표면의 노멀 벡터(N)를 내적하여 라이팅을 계산한다.</li>
</ul>

<center><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/104995793-2e045080-5a6a-11eb-86db-8c7601d12846.png" width="500" /> </center>

<p><br /></p>

<h1 id="shadertoy에서의-구현-예시">ShaderToy에서의 구현 예시</h1>
<hr />

<ul>
  <li><a href="https://www.shadertoy.com/view/wstBW4">https://www.shadertoy.com/view/wstBW4</a></li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/111060423-17b1c880-84e0-11eb-8367-c221f3576e91.gif" alt="2021_0314_Raymarching" /></p>

<p><br /></p>

<details>
  <summary> 
Source Code
</summary>

  <div class="language-glsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
</pre></td><td class="rouge-code"><pre><span class="cp">#define MAX_STEPS 100
#define MAX_DIST  100.0
#define SURF_DIST 0.01
</span>
<span class="c1">// 광원</span>
<span class="kt">vec3</span> <span class="n">g_lightPos</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">0</span><span class="p">.,</span> <span class="mi">5</span><span class="p">.,</span> <span class="mi">1</span><span class="p">.);</span>

<span class="cm">/**************************************************************************************************
 * 3D Objects
 * https://iquilezles.org/www/articles/distfunctions/distfunctions.htm
 * https://www.youtube.com/watch?v=Ff0jJyyiVyw
 **************************************************************************************************/</span>
<span class="k">struct</span> <span class="n">Plane</span>
<span class="p">{</span>
    <span class="kt">vec3</span>  <span class="n">normal</span><span class="p">;</span> <span class="c1">// 평면 법선 벡터의 방향</span>
    <span class="kt">float</span> <span class="n">height</span><span class="p">;</span> <span class="c1">// 높이 : 원점에서 normal벡터 방향으로 더한 값</span>
<span class="p">};</span>
    
<span class="k">struct</span> <span class="n">Sphere</span>
<span class="p">{</span>
    <span class="kt">vec3</span>  <span class="n">pos</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">radius</span><span class="p">;</span>
<span class="p">};</span>
    
<span class="k">struct</span> <span class="n">Box</span>
<span class="p">{</span>
    <span class="kt">vec3</span> <span class="n">pos</span><span class="p">;</span>
    <span class="kt">vec3</span> <span class="n">size</span><span class="p">;</span>
<span class="p">};</span>
    
<span class="c1">// 속이 빈 박스</span>
<span class="k">struct</span> <span class="n">BoundingBox</span>
<span class="p">{</span>
    <span class="kt">vec3</span>  <span class="n">pos</span><span class="p">;</span>
    <span class="kt">vec3</span>  <span class="n">size</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">e</span><span class="p">;</span>    <span class="c1">// edge Thickness</span>
<span class="p">};</span>

<span class="c1">// 도넛형</span>
<span class="k">struct</span> <span class="n">Torus</span>
<span class="p">{</span>
    <span class="kt">vec3</span> <span class="n">pos</span><span class="p">;</span>
    <span class="kt">vec2</span> <span class="n">radius</span><span class="p">;</span> <span class="c1">// (out radius, in radius)</span>
<span class="p">};</span>

<span class="cm">/**************************************************************************************************
 * 3D Object Distance Functions
 **************************************************************************************************/</span>
<span class="c1">// GetMinDist : 지점 p로부터 오브젝트 o위의 정점으로의 거리 중 가장 가까운 거리 찾아 리턴</span>
<span class="kt">float</span> <span class="nf">SD</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">,</span> <span class="n">Sphere</span> <span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">pos</span><span class="p">)</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">radius</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">float</span> <span class="nf">SD</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">,</span> <span class="n">Plane</span> <span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">dot</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">normalize</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">normal</span><span class="p">))</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">float</span> <span class="nf">SD</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">,</span> <span class="n">Box</span> <span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">vec3</span> <span class="n">q</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">pos</span><span class="p">)</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">size</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">))</span> <span class="o">+</span> <span class="n">min</span><span class="p">(</span> <span class="n">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">z</span><span class="p">)</span> <span class="p">),</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">float</span> <span class="nf">SD</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">,</span> <span class="n">BoundingBox</span> <span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">vec3</span>  <span class="n">b</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">size</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">e</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">e</span><span class="p">;</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">pos</span> <span class="p">)</span><span class="o">-</span><span class="n">b</span><span class="p">;</span>
    <span class="kt">vec3</span> <span class="n">q</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="n">e</span><span class="p">)</span><span class="o">-</span><span class="n">e</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="n">min</span><span class="p">(</span><span class="n">min</span><span class="p">(</span>
    <span class="n">length</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="kt">vec3</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">z</span><span class="p">),</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">))</span><span class="o">+</span><span class="n">min</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">z</span><span class="p">)),</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span>
    <span class="n">length</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="kt">vec3</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">z</span><span class="p">),</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">))</span><span class="o">+</span><span class="n">min</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">max</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">z</span><span class="p">)),</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">)),</span>
    <span class="n">length</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="kt">vec3</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="p">),</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">))</span><span class="o">+</span><span class="n">min</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="p">)),</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>
<span class="kt">float</span> <span class="nf">SD</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">,</span> <span class="n">Torus</span> <span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">pos</span><span class="p">;</span>
    <span class="kt">vec2</span> <span class="n">r</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">radius</span><span class="p">;</span>
        
    <span class="kt">vec2</span> <span class="n">q</span> <span class="o">=</span> <span class="kt">vec2</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">xz</span><span class="p">)</span><span class="o">-</span><span class="n">r</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">q</span><span class="p">)</span><span class="o">-</span><span class="n">r</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**************************************************************************************************
 * Ray Marching Functions
 **************************************************************************************************/</span>
<span class="c1">// 현재 진행중인 레이 위의 점에서 다음 지점(특정 오브젝트 표면 또는 플레인) 발견하여 리턴</span>
<span class="c1">// 현재 위치 p에서 구형범위로 탐색하여, 어떤 물체든 찾아 가장 작은 구체의 반지름을 리턴하는 것과 같음</span>
<span class="kt">float</span> <span class="nf">GetDist</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Plane</span> <span class="n">pl</span><span class="p">;</span>
    <span class="n">pl</span><span class="p">.</span><span class="n">normal</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">pl</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    
    <span class="n">Sphere</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">s</span><span class="p">.</span><span class="n">pos</span>    <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">s</span><span class="p">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    
    <span class="n">Box</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span><span class="p">.</span><span class="n">pos</span>   <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">b</span><span class="p">.</span><span class="n">size</span>  <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    
    <span class="n">BoundingBox</span> <span class="n">bb</span><span class="p">;</span>
    <span class="n">bb</span><span class="p">.</span><span class="n">pos</span>  <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">bb</span><span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">bb</span><span class="p">.</span><span class="n">e</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
    
    <span class="n">Torus</span> <span class="n">t</span><span class="p">;</span>
    <span class="n">t</span><span class="p">.</span><span class="n">pos</span>   <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">t</span><span class="p">.</span><span class="n">radius</span> <span class="o">=</span> <span class="kt">vec2</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4</span><span class="p">);</span>
    
    <span class="kt">float</span> <span class="n">dPlane</span>  <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">pl</span><span class="p">);</span> <span class="c1">//p.y;</span>
    <span class="kt">float</span> <span class="n">dSphere</span> <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">dBox</span>    <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">dBBox</span>   <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">bb</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">dTorus</span>  <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
    
    <span class="c1">// 발견한 다음 지점들 중 가장 가까운 지점 리턴</span>
    <span class="kt">float</span> <span class="n">d</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">dPlane</span><span class="p">,</span> <span class="n">dSphere</span><span class="p">);</span>
          <span class="n">d</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dBox</span><span class="p">);</span>
          <span class="n">d</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dBBox</span><span class="p">);</span>
          <span class="n">d</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dTorus</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="n">d</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ro(카메라)로부터 rd 방향(모든 uv 픽셀)으로 레이 발사</span>
<span class="c1">// 리턴값 : 카메라로부터 레이 방향에서 찾은 가장 가까운 정점</span>
<span class="kt">float</span> <span class="nf">RayMarch</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">ro</span><span class="p">,</span> <span class="kt">vec3</span> <span class="n">rd</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// RayMarch Distance From Origin : Ray Origin(카메라)에서부터의 거리</span>
    <span class="kt">float</span> <span class="n">dO</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.;</span>
    
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_STEPS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">vec3</span> <span class="n">p</span> <span class="o">=</span> <span class="n">ro</span> <span class="o">+</span> <span class="n">rd</span> <span class="o">*</span> <span class="n">dO</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">dS</span> <span class="o">=</span> <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>   <span class="c1">// Distance to the Scene : 레이 내에서 다음 스텝으로 전진시킬 거리</span>
        <span class="n">dO</span> <span class="o">+=</span> <span class="n">dS</span><span class="p">;</span>                <span class="c1">// 레이 한 스텝 전진</span>
        
        <span class="c1">// 레이 제한 거리까지 도달하거나</span>
        <span class="c1">// 레이가 물체의 정점 또는 땅에 닿은 경우 레이 마칭 종료</span>
        <span class="k">if</span><span class="p">(</span><span class="n">dO</span> <span class="o">&gt;</span> <span class="n">MAX_DIST</span> <span class="o">||</span> <span class="n">dS</span> <span class="o">&lt;</span> <span class="n">SURF_DIST</span><span class="p">)</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="n">dO</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 각 정점에서 노멀 벡터 계산</span>
<span class="kt">vec3</span> <span class="nf">GetNormal</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">d</span> <span class="o">=</span> <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="kt">vec2</span>  <span class="n">e</span> <span class="o">=</span> <span class="kt">vec2</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mo">001</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
    
    <span class="c1">// x, y, z 좌표를 0.01씩 움직인 3개의 방향벡터로 각각 GetDist를 통해 해당 방향에 있는 물체의 정점까지 거리를 찾고,</span>
    <span class="c1">// 이를 x, y, z 성분으로 사용한 노멀 벡터 생성</span>
    <span class="kt">vec3</span> <span class="n">n</span> <span class="o">=</span> <span class="n">d</span> <span class="o">-</span> <span class="kt">vec3</span><span class="p">(</span>
        <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">xyy</span><span class="p">),</span>
        <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">yxy</span><span class="p">),</span>
        <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">yyx</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="k">return</span> <span class="n">normalize</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 각 정점에서 라이팅 계산</span>
<span class="kt">float</span> <span class="nf">GetLight</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">vec3</span> <span class="n">L</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">g_lightPos</span> <span class="o">-</span> <span class="n">p</span><span class="p">);</span>
    <span class="kt">vec3</span> <span class="n">N</span> <span class="o">=</span> <span class="n">GetNormal</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    
    <span class="c1">// Shade(Diffuse)</span>
    <span class="kt">float</span> <span class="n">dif</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span> <span class="n">dot</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">L</span><span class="p">)</span> <span class="p">);</span>
    
    <span class="c1">// Shadow</span>
    <span class="c1">// 정점(3D 물체 표면이 위치하는 모든 지점)에서 광원을 향해 레이마칭하여 얻은 거리가</span>
    <span class="c1">// 정점에서 광원까지의 거리보다 작다면,</span>
    <span class="c1">// 그 사이에 또다른 정점이 가로막고 있다는 뜻이므로 이 정점은 그림자가 생김</span>
    
    <span class="c1">// SURF_DIST만큼의 거리를 더해주는 이유 : 레이가 정점을 찾아내는 최소 거리(Threshold)이므로</span>
    <span class="c1">// SURF_DIST에 1.0 초과 숫자를 곱해주는 이유 : 의도치 않은 음영이 생길 수 있으므로</span>
    
    <span class="kt">float</span> <span class="n">d</span> <span class="o">=</span> <span class="n">RayMarch</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="n">N</span> <span class="o">*</span> <span class="n">SURF_DIST</span> <span class="o">*</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">L</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">d</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">(</span><span class="n">g_lightPos</span> <span class="o">-</span> <span class="n">p</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">dif</span> <span class="o">*=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="n">dif</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">DistLine</span><span class="p">(</span><span class="kt">vec3</span> <span class="n">ro</span><span class="p">,</span> <span class="kt">vec3</span> <span class="n">rd</span><span class="p">,</span> <span class="kt">vec3</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">ro</span><span class="p">,</span> <span class="n">rd</span><span class="p">))</span> <span class="o">/</span> <span class="n">length</span><span class="p">(</span><span class="n">rd</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**************************************************************************************************
 * Main
 **************************************************************************************************/</span>
<span class="kt">void</span> <span class="nf">mainImage</span><span class="p">(</span> <span class="k">out</span> <span class="kt">vec4</span> <span class="n">fragColor</span><span class="p">,</span> <span class="k">in</span> <span class="kt">vec2</span> <span class="n">fragCoord</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// UV ================================================================================================</span>
    <span class="kt">vec2</span> <span class="n">uv</span> <span class="o">=</span> <span class="n">fragCoord</span><span class="o">/</span><span class="n">iResolution</span><span class="p">.</span><span class="n">xy</span><span class="p">;</span>                
           <span class="n">uv</span> <span class="o">=</span> <span class="p">(</span><span class="n">uv</span> <span class="o">-</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="kt">vec2</span><span class="p">(</span><span class="n">iResolution</span><span class="p">.</span><span class="n">x</span><span class="o">/</span><span class="n">iResolution</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span> <span class="c1">// Square Area  -1.0 ~ 1.0</span>
    
    <span class="kt">float</span> <span class="n">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">3</span><span class="p">;</span>
    <span class="n">uv</span> <span class="o">/=</span> <span class="n">zoom</span><span class="p">;</span>
    
    <span class="kt">vec2</span> <span class="n">mPos</span> <span class="o">=</span> <span class="n">iMouse</span><span class="p">.</span><span class="n">xy</span><span class="o">/</span><span class="n">iResolution</span><span class="p">.</span><span class="n">xy</span><span class="p">;</span>
           <span class="n">mPos</span> <span class="o">=</span> <span class="p">(</span><span class="n">mPos</span> <span class="o">-</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="kt">vec2</span><span class="p">(</span><span class="n">iResolution</span><span class="p">.</span><span class="n">x</span><span class="o">/</span><span class="n">iResolution</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">mPos</span> <span class="o">/=</span> <span class="n">zoom</span><span class="p">;</span>
    
    <span class="c1">// Final Variables ===================================================================================</span>
    <span class="kt">vec3</span> <span class="n">shp</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// Shapes</span>
    <span class="kt">vec3</span> <span class="n">col</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// Colors of Shapes</span>
    
    <span class="c1">// Ray Origin</span>
    <span class="kt">vec3</span> <span class="n">ro</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span><span class="c1">// + vec3(sin(mPos.x), 0., cos(mPos.x));</span>
    
    <span class="c1">// Ray Direction : ro -&gt; uv screen</span>
    <span class="kt">vec3</span> <span class="n">rd</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="kt">vec3</span><span class="p">(</span><span class="n">uv</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">));</span>
    
    <span class="kt">float</span> <span class="n">t</span> <span class="o">=</span> <span class="n">iTime</span><span class="p">;</span>
    
    <span class="kt">float</span> <span class="n">d</span><span class="p">;</span>  <span class="c1">// Distance from point</span>
    <span class="kt">vec3</span>  <span class="n">p</span><span class="p">;</span>  <span class="c1">// Result of RayMarching (3D Shapes)</span>
    <span class="kt">float</span> <span class="n">dif</span><span class="p">;</span><span class="c1">// Diffuse</span>
    
    
    <span class="cm">/*****************************************************************************************************************
    * Body Start                                                                                                     *
    *****************************************************************************************************************/</span>
    
    <span class="n">g_lightPos</span> <span class="o">+=</span> <span class="kt">vec3</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="mi">0</span><span class="p">.,</span> <span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="o">*</span> <span class="mi">3</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    
    <span class="n">d</span> <span class="o">=</span> <span class="n">RayMarch</span><span class="p">(</span><span class="n">ro</span><span class="p">,</span> <span class="n">rd</span><span class="p">);</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">ro</span> <span class="o">+</span> <span class="n">rd</span> <span class="o">*</span> <span class="n">d</span><span class="p">;</span>
    <span class="n">dif</span> <span class="o">=</span> <span class="n">GetLight</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    
    <span class="cm">/*****************************************************************************************************************
    *                                                                                                       Body End *
    *****************************************************************************************************************/</span>
    
    
    <span class="c1">// Draw Shapes =======================================================================================</span>
    <span class="n">shp</span> <span class="o">+=</span> <span class="n">dif</span><span class="p">;</span>
        
    <span class="c1">// Apply Colors ======================================================================================</span>
    <span class="n">col</span> <span class="o">+=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9</span><span class="p">);</span>
    
    <span class="c1">// End Point =========================================================================================</span>
    <span class="n">fragColor</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">fragColor</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">shp</span> <span class="o">*</span> <span class="n">col</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>

<p><br /></p>

<h1 id="유니티-엔진에서의-간단한-구현-예시">유니티 엔진에서의 간단한 구현 예시</h1>
<hr />

<p>[1] <a href="https://github.com/SebLague/Ray-Marching">https://github.com/SebLague/Ray-Marching</a> 활용</p>

<center><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/105003713-5f831900-5a76-11eb-8090-bd2e8d6f9b87.png" width="500" /></center>

<p><br /></p>

<p>[2] 하나의 쉐이더 내에서 구현</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/124320293-8feae980-dbb6-11eb-85ca-f861415b9785.gif" alt="2021_0703_Unity_Raymarching" /></p>

<details>
  <summary> 
Raymarching.shader
</summary>

  <div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
</pre></td><td class="rouge-code"><pre><span class="c1">// https://www.youtube.com/watch?v=S8AWd66hoCo</span>

<span class="n">Shader</span> <span class="s">"Rito/RayMarching"</span>
<span class="p">{</span>
    <span class="n">Properties</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">}</span>
    <span class="n">SubShader</span>
    <span class="p">{</span>
        <span class="n">Tags</span> <span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="p">}</span>
        <span class="n">LOD</span> <span class="mi">100</span>

        <span class="n">Pass</span>
        <span class="p">{</span>
            <span class="n">CGPROGRAM</span>
            <span class="cp">#pragma vertex vert
</span>            <span class="cp">#pragma fragment frag
</span>
            <span class="cp">#include "UnityCG.cginc"
</span>
            <span class="cp">#define MAX_STEPS 100
</span>            <span class="cp">#define MAX_DIST  100
</span>            <span class="cp">#define SURF_DIST 0.001
</span>
            <span class="k">struct</span> <span class="n">appdata</span>
            <span class="p">{</span>
                <span class="kt">float4</span> <span class="n">vertex</span> <span class="o">:</span> <span class="nb">POSITION</span><span class="p">;</span>
                <span class="kt">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="nb">TEXCOORD0</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="k">struct</span> <span class="n">v2f</span>
            <span class="p">{</span>
                <span class="kt">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="nb">TEXCOORD0</span><span class="p">;</span>
                <span class="kt">float4</span> <span class="n">vertex</span> <span class="o">:</span> <span class="nb">SV_POSITION</span><span class="p">;</span>
                <span class="kt">float3</span> <span class="n">ro</span> <span class="o">:</span> <span class="nb">TEXCOORD1</span><span class="p">;</span>
                <span class="kt">float3</span> <span class="n">hitPos</span> <span class="o">:</span> <span class="nb">TEXCOORD2</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="n">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
            <span class="kt">float4</span> <span class="n">_MainTex_ST</span><span class="p">;</span>

            <span class="n">v2f</span> <span class="n">vert</span> <span class="p">(</span><span class="n">appdata</span> <span class="n">v</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">v2f</span> <span class="n">o</span><span class="p">;</span>
                <span class="n">o</span><span class="p">.</span><span class="n">vertex</span> <span class="o">=</span> <span class="n">UnityObjectToClipPos</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">);</span>
                <span class="n">o</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">,</span> <span class="n">_MainTex</span><span class="p">);</span>

                <span class="n">o</span><span class="p">.</span><span class="n">ro</span> <span class="o">=</span> <span class="nb">mul</span><span class="p">(</span><span class="n">unity_WorldToObject</span><span class="p">,</span> <span class="kt">float4</span><span class="p">(</span><span class="n">_WorldSpaceCameraPos</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
                <span class="n">o</span><span class="p">.</span><span class="n">hitPos</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">;</span>

                <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="cm">/*****************************************************************
                                             Functions
            ******************************************************************/</span>
            <span class="c1">// 트랜스폼의 회전 행렬 추출</span>
            <span class="kt">float4x4</span> <span class="n">GetModelRotationMatrix</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="kt">float4x4</span> <span class="n">rotationMatrix</span><span class="p">;</span>

                <span class="kt">vector</span> <span class="n">sx</span> <span class="o">=</span> <span class="kt">vector</span><span class="p">(</span><span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m00</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m10</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m20</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="kt">vector</span> <span class="n">sy</span> <span class="o">=</span> <span class="kt">vector</span><span class="p">(</span><span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m01</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m11</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m21</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="kt">vector</span> <span class="n">sz</span> <span class="o">=</span> <span class="kt">vector</span><span class="p">(</span><span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m02</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m12</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m22</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

                <span class="n">float</span> <span class="n">scaleX</span> <span class="o">=</span> <span class="nb">length</span><span class="p">(</span><span class="n">sx</span><span class="p">);</span>
                <span class="n">float</span> <span class="n">scaleY</span> <span class="o">=</span> <span class="nb">length</span><span class="p">(</span><span class="n">sy</span><span class="p">);</span>
                <span class="n">float</span> <span class="n">scaleZ</span> <span class="o">=</span> <span class="nb">length</span><span class="p">(</span><span class="n">sz</span><span class="p">);</span>

                <span class="n">rotationMatrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kt">float4</span><span class="p">(</span><span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m00</span> <span class="o">/</span> <span class="n">scaleX</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m01</span> <span class="o">/</span> <span class="n">scaleY</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m02</span> <span class="o">/</span> <span class="n">scaleZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="n">rotationMatrix</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kt">float4</span><span class="p">(</span><span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m10</span> <span class="o">/</span> <span class="n">scaleX</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m11</span> <span class="o">/</span> <span class="n">scaleY</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m12</span> <span class="o">/</span> <span class="n">scaleZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="n">rotationMatrix</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="kt">float4</span><span class="p">(</span><span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m20</span> <span class="o">/</span> <span class="n">scaleX</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m21</span> <span class="o">/</span> <span class="n">scaleY</span><span class="p">,</span> <span class="n">unity_ObjectToWorld</span><span class="p">.</span><span class="n">_m22</span> <span class="o">/</span> <span class="n">scaleZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="n">rotationMatrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="kt">float4</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

                <span class="k">return</span> <span class="n">rotationMatrix</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// 위치 벡터 회전</span>
            <span class="kt">float3</span> <span class="n">RotatePosObjectToWorld</span><span class="p">(</span><span class="kt">float4x4</span> <span class="n">rotationMatrix</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nb">mul</span><span class="p">(</span><span class="n">rotationMatrix</span><span class="p">,</span> <span class="n">pos</span><span class="p">).</span><span class="n">xyz</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kt">float3</span> <span class="n">RotatePosWorldToObject</span><span class="p">(</span><span class="kt">float4x4</span> <span class="n">rotationMatrix</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nb">mul</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">rotationMatrix</span><span class="p">).</span><span class="n">xyz</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="c1">// 방향 벡터 회전</span>
            <span class="kt">float3</span> <span class="n">RotateDirObjectToWorld</span><span class="p">(</span><span class="kt">float4x4</span> <span class="n">rotationMatrix</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">dir</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nb">mul</span><span class="p">((</span><span class="kt">float3x3</span><span class="p">)</span><span class="n">rotationMatrix</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kt">float3</span> <span class="n">RotateDirWorldToObject</span><span class="p">(</span><span class="kt">float4x4</span> <span class="n">rotationMatrix</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">dir</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nb">mul</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="p">(</span><span class="kt">float3x3</span><span class="p">)</span><span class="n">rotationMatrix</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/*****************************************************************
                                  Signed Distance Functions
            ******************************************************************/</span>
            <span class="n">float</span> <span class="n">SdSphere</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="n">float</span> <span class="n">radius</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nb">length</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">pos</span><span class="p">)</span> <span class="o">-</span> <span class="n">radius</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">float</span> <span class="n">SdSphere2</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="n">float</span> <span class="n">radius</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">scale</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">p</span> <span class="o">-=</span> <span class="n">pos</span><span class="p">;</span>
                <span class="n">p</span> <span class="o">/=</span> <span class="n">scale</span><span class="p">;</span>
                <span class="n">p</span> <span class="o">+=</span> <span class="n">pos</span><span class="p">;</span>

                <span class="k">return</span> <span class="nb">length</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">pos</span><span class="p">)</span> <span class="o">-</span> <span class="n">radius</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">float</span> <span class="n">SdTorus</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="n">float</span> <span class="n">radius</span><span class="p">,</span> <span class="n">float</span> <span class="n">width</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">-</span> <span class="n">pos</span><span class="p">;</span>
                <span class="n">float</span> <span class="n">r</span> <span class="o">=</span> <span class="n">radius</span><span class="p">;</span>
                <span class="n">float</span> <span class="n">w</span> <span class="o">=</span> <span class="n">width</span><span class="p">;</span>
                <span class="kt">float2</span> <span class="n">q</span> <span class="o">=</span> <span class="kt">float2</span><span class="p">(</span><span class="nb">length</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">xz</span><span class="p">)</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
                <span class="k">return</span> <span class="nb">length</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="o">-</span> <span class="n">w</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">float</span> <span class="n">SdBox</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">size</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">float3</span> <span class="n">q</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">pos</span><span class="p">)</span> <span class="o">-</span> <span class="n">size</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">length</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">))</span> <span class="o">+</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">z</span><span class="p">)</span> <span class="p">),</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
            
            <span class="cm">/*****************************************************************
                                        Operator Functions
            ******************************************************************/</span>
            <span class="kt">float2x2</span> <span class="n">GetRotationMatrix2x2</span><span class="p">(</span><span class="n">float</span> <span class="n">degree</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">float</span> <span class="n">radian</span> <span class="o">=</span> <span class="nb">radians</span><span class="p">(</span><span class="n">degree</span><span class="p">);</span>
                <span class="n">float</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">sin</span><span class="p">(</span><span class="n">radian</span><span class="p">);</span>
                <span class="n">float</span> <span class="n">c</span> <span class="o">=</span> <span class="nb">cos</span><span class="p">(</span><span class="n">radian</span><span class="p">);</span>

                <span class="k">return</span> <span class="kt">float2x2</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="o">-</span><span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kt">float3</span> <span class="n">RotateX</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="n">float</span> <span class="n">degree</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">p</span> <span class="o">-=</span> <span class="n">pos</span><span class="p">;</span>
                <span class="n">p</span><span class="p">.</span><span class="n">yz</span> <span class="o">=</span> <span class="nb">mul</span><span class="p">(</span><span class="n">GetRotationMatrix2x2</span><span class="p">(</span><span class="n">degree</span><span class="p">),</span> <span class="n">p</span><span class="p">.</span><span class="n">yz</span><span class="p">);</span>
                <span class="n">p</span> <span class="o">+=</span> <span class="n">pos</span><span class="p">;</span>

                <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="kt">float3</span> <span class="n">RotateY</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="n">float</span> <span class="n">degree</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">p</span> <span class="o">-=</span> <span class="n">pos</span><span class="p">;</span>
                <span class="n">p</span><span class="p">.</span><span class="n">xz</span> <span class="o">=</span> <span class="nb">mul</span><span class="p">(</span><span class="n">GetRotationMatrix2x2</span><span class="p">(</span><span class="n">degree</span><span class="p">),</span> <span class="n">p</span><span class="p">.</span><span class="n">xz</span><span class="p">);</span>
                <span class="n">p</span> <span class="o">+=</span> <span class="n">pos</span><span class="p">;</span>

                <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="kt">float3</span> <span class="n">RotateZ</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="n">float</span> <span class="n">degree</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">p</span> <span class="o">-=</span> <span class="n">pos</span><span class="p">;</span>
                <span class="n">p</span><span class="p">.</span><span class="n">xy</span> <span class="o">=</span> <span class="nb">mul</span><span class="p">(</span><span class="n">GetRotationMatrix2x2</span><span class="p">(</span><span class="n">degree</span><span class="p">),</span> <span class="n">p</span><span class="p">.</span><span class="n">xy</span><span class="p">);</span>
                <span class="n">p</span> <span class="o">+=</span> <span class="n">pos</span><span class="p">;</span>

                <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kt">float3</span> <span class="n">Scale</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">pos</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">scale</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">p</span> <span class="o">-=</span> <span class="n">pos</span><span class="p">;</span>
                <span class="n">p</span> <span class="o">/=</span> <span class="n">scale</span><span class="p">;</span>
                <span class="n">p</span> <span class="o">+=</span> <span class="n">pos</span><span class="p">;</span>
                <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Polynomial smooth min (k = 0.1);</span>
            <span class="n">float</span> <span class="n">smin</span><span class="p">(</span><span class="n">float</span> <span class="n">a</span><span class="p">,</span> <span class="n">float</span> <span class="n">b</span><span class="p">,</span> <span class="n">float</span> <span class="n">k</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">float</span> <span class="n">h</span> <span class="o">=</span> <span class="nb">saturate</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">/</span> <span class="n">k</span><span class="p">);</span>
                <span class="k">return</span> <span class="nb">lerp</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="n">k</span> <span class="o">*</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">h</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">float</span> <span class="n">smin</span><span class="p">(</span><span class="n">float</span> <span class="n">a</span><span class="p">,</span> <span class="n">float</span> <span class="n">b</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="n">smin</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kt">float3</span> <span class="n">Displacement</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">,</span> <span class="n">float</span> <span class="n">dist</span><span class="p">,</span> <span class="n">float</span> <span class="n">intensity</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">float3</span> <span class="n">disp</span> <span class="o">=</span> <span class="nb">sin</span><span class="p">(</span><span class="n">p</span> <span class="o">*</span> <span class="n">dist</span><span class="p">)</span> <span class="o">*</span> <span class="n">intensity</span><span class="p">;</span>
                <span class="k">return</span> <span class="n">p</span> <span class="o">+</span> <span class="n">disp</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="cm">/*****************************************************************
                                   Ray Marching Functions
            ******************************************************************/</span>
            <span class="c1">// Sphere + Torus + Sphere*8</span>
            <span class="n">float</span> <span class="n">SunShape</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">float</span> <span class="n">t</span> <span class="o">=</span> <span class="n">_Time</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
                <span class="kt">float3</span> <span class="n">centerPos</span> <span class="o">=</span> <span class="kt">float3</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>

                <span class="n">float</span> <span class="n">torus</span> <span class="o">=</span> <span class="n">SdTorus</span><span class="p">(</span><span class="n">RotateX</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">centerPos</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="n">centerPos</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">float</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">SdSphere</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">centerPos</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span> <span class="o">+</span> <span class="nb">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="mi">3</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">);</span>

                <span class="n">float</span> <span class="n">d</span> <span class="o">=</span> <span class="n">smin</span><span class="p">(</span><span class="n">torus</span><span class="p">,</span> <span class="n">s1</span><span class="p">);</span>
                
                <span class="kt">float3</span> <span class="n">s2_pos</span> <span class="o">=</span> <span class="n">centerPos</span><span class="p">;</span> <span class="n">s2_pos</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9</span><span class="p">;</span>

                <span class="k">for</span><span class="p">(</span><span class="n">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="kt">float3</span> <span class="n">s2_p</span> <span class="o">=</span> <span class="n">RotateZ</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">centerPos</span><span class="p">,</span> <span class="mi">45</span><span class="p">.</span><span class="mi">0</span> <span class="o">*</span> <span class="p">(</span><span class="n">float</span><span class="p">)</span><span class="n">i</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="mi">50</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
                    <span class="n">float</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">SdSphere2</span><span class="p">(</span><span class="n">s2_p</span><span class="p">,</span> <span class="n">s2_pos</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span> <span class="kt">float3</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">));</span>

                    <span class="n">d</span> <span class="o">=</span> <span class="n">smin</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">s2</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="n">d</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Final SD Functions</span>
            <span class="n">float</span> <span class="n">GetDist</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">float</span> <span class="n">t</span> <span class="o">=</span> <span class="n">_Time</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
                <span class="n">float</span> <span class="n">d</span> <span class="o">=</span> <span class="n">SunShape</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
                
                <span class="kt">float3</span> <span class="n">pos2</span> <span class="o">=</span> <span class="kt">float3</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
                <span class="n">float</span> <span class="n">scale</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7</span> <span class="o">+</span> <span class="nb">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>

                <span class="kt">float3</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
                <span class="n">p2</span> <span class="o">=</span> <span class="n">RotateX</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">t</span> <span class="o">*</span> <span class="mi">60</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
                <span class="n">p2</span> <span class="o">=</span> <span class="n">RotateZ</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">t</span> <span class="o">*</span> <span class="mi">90</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>

                <span class="n">float</span> <span class="n">box</span> <span class="o">=</span> <span class="n">SdBox</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">scale</span><span class="p">);</span>
                <span class="n">float</span> <span class="n">sp</span> <span class="o">=</span> <span class="n">SdSphere</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">scale</span> <span class="o">*</span> <span class="mi">1</span><span class="p">.</span><span class="mi">3</span><span class="p">);</span>

                <span class="n">float</span> <span class="n">d2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">box</span><span class="p">,</span> <span class="o">-</span><span class="n">sp</span><span class="p">);</span>

                <span class="n">d</span> <span class="o">=</span> <span class="n">smin</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4</span><span class="p">);</span>

                <span class="k">return</span> <span class="n">d</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kt">float3</span> <span class="n">GetNormal</span><span class="p">(</span><span class="kt">float3</span> <span class="n">p</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">float2</span> <span class="n">e</span> <span class="o">=</span> <span class="kt">float2</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mo">01</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="kt">float3</span> <span class="n">n</span> <span class="o">=</span> <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="kt">float3</span><span class="p">(</span>
                    <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">xyy</span><span class="p">),</span>
                    <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">yxy</span><span class="p">),</span>
                    <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">yyx</span><span class="p">)</span>
                <span class="p">);</span>
                <span class="k">return</span> <span class="nb">normalize</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">float</span> <span class="n">GetLight</span><span class="p">(</span><span class="kt">float3</span> <span class="n">N</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">L</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">L</span><span class="p">));</span>
            <span class="p">}</span>

            <span class="n">float</span> <span class="n">Raymarch</span><span class="p">(</span><span class="kt">float3</span> <span class="n">ro</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">rd</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">float</span> <span class="n">dO</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 누적 전진 거리</span>
                <span class="n">float</span> <span class="n">dS</span><span class="p">;</span>     <span class="c1">// 이번 스텝에서 전진할 거리</span>

                <span class="k">for</span><span class="p">(</span><span class="n">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_STEPS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="kt">float3</span> <span class="n">p</span> <span class="o">=</span> <span class="n">ro</span> <span class="o">+</span> <span class="n">dO</span> <span class="o">*</span> <span class="n">rd</span><span class="p">;</span>
                    <span class="n">dS</span> <span class="o">=</span> <span class="n">GetDist</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
                    <span class="n">dO</span> <span class="o">+=</span> <span class="n">dS</span><span class="p">;</span>

                    <span class="k">if</span><span class="p">(</span><span class="n">dS</span> <span class="o">&lt;</span> <span class="n">SURF_DIST</span> <span class="o">||</span> <span class="n">dO</span> <span class="o">&gt;</span> <span class="n">MAX_DIST</span><span class="p">)</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="n">dO</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="cm">/*****************************************************************
                                       Fragment Function
            ******************************************************************/</span>
            <span class="n">fixed4</span> <span class="n">frag</span> <span class="p">(</span><span class="n">v2f</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_Target</span>
            <span class="p">{</span>
                <span class="kt">float4x4</span> <span class="n">rotMatrix</span> <span class="o">=</span> <span class="n">GetModelRotationMatrix</span><span class="p">();</span>

                <span class="c1">// Object Light Direction</span>
                <span class="kt">float3</span> <span class="n">L</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="n">_WorldSpaceLightPos0</span><span class="p">.</span><span class="n">xyz</span><span class="p">);</span>
                <span class="n">L</span> <span class="o">=</span> <span class="n">RotateDirWorldToObject</span><span class="p">(</span><span class="n">rotMatrix</span><span class="p">,</span> <span class="n">L</span><span class="p">);</span>

                <span class="kt">float2</span> <span class="n">uv</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span> <span class="o">-</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
                <span class="kt">float3</span> <span class="n">ro</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">ro</span><span class="p">;</span>
                <span class="kt">float3</span> <span class="n">rd</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">hitPos</span> <span class="o">-</span> <span class="n">ro</span><span class="p">);</span>

                <span class="n">float</span> <span class="n">d</span> <span class="o">=</span> <span class="n">Raymarch</span><span class="p">(</span><span class="n">ro</span><span class="p">,</span> <span class="n">rd</span><span class="p">);</span>
                <span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

                <span class="k">if</span><span class="p">(</span><span class="n">d</span> <span class="o">&lt;</span> <span class="n">MAX_DIST</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="kt">float3</span> <span class="n">p</span> <span class="o">=</span> <span class="n">ro</span> <span class="o">+</span> <span class="n">rd</span> <span class="o">*</span> <span class="n">d</span><span class="p">;</span>
                    <span class="kt">float3</span> <span class="n">N</span> <span class="o">=</span> <span class="n">GetNormal</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
                    <span class="n">col</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">GetLight</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">L</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span>
                    <span class="k">discard</span><span class="p">;</span>

                <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">ENDCG</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>

<p><br /></p>

<h1 id="장점">장점</h1>
<hr />
<ul>
  <li>메시(Mesh) 데이터가 필요하지 않다.</li>
  <li>부드러운 곡면이나 유체를 표현하기에 좋다.</li>
  <li>반복되는 패턴을 렌더링하기에 좋다.</li>
  <li>거리 함수, 연산 함수들을 이용하여 오브젝트들을 다양한 형태로 부드럽게 섞어 렌더링할 수 있다.</li>
  <li>각 레이를 GPU 연산을 통해 병렬적으로 연산하기에 적합하다.</li>
</ul>

<p><br /></p>

<h1 id="단점">단점</h1>
<hr />
<ul>
  <li>기존의 렌더링 방식에 비해 성능 소모가 크다.</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/105004241-023b9780-5a77-11eb-9d91-015809da2d88.png" width="500" /></p>

<p><br /></p>

<h1 id="연관-개념">연관 개념</h1>
<hr />
<ul>
  <li>
    <p><a href="https://blog.hybrid3d.dev/2019-11-15-raytracing-pathtracing-denoising">https://blog.hybrid3d.dev/2019-11-15-raytracing-pathtracing-denoising</a></p>
  </li>
  <li><strong>레이 트레이싱(Ray Traycing)</strong>
    <ul>
      <li>빛이 물체의 표면에서 여러번 난반사되어 카메라에 도달하기까지의 경로를 모두 역추적하여 계산하는 기법</li>
      <li>요구되는 연산량이 매우 많다.</li>
      <li>기본적인 레이 트레이싱은 주로 반사/스페큘러 계산에 사용한다.</li>
    </ul>
  </li>
  <li><strong>패스 트레이싱(Path Traycing)</strong>
    <ul>
      <li>레이 트레이싱의 일종</li>
      <li>반사, 굴절이 없는 물체에도 모두 레이를 추적하여, 보다 현실적인 그래픽을 표현하는 기법</li>
      <li>레이 트레이싱을 이용해 디퓨즈(Diffuse) 및 스페큘러(Specular), 전역 조명(GI, Global Illumination)을 주로 계산한다.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h1 id="references">References</h1>
<hr />
<ul>
  <li><a href="http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions">http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions</a></li>
  <li><a href="https://www.iquilezles.org/www/index.htm">https://www.iquilezles.org/www/index.htm</a></li>
  <li><a href="https://github.com/SebLague/Ray-Marching">https://github.com/SebLague/Ray-Marching</a></li>
  <li><a href="https://www.youtube.com/watch?v=Cp5WWtMoeKg">Youtube: Sebastian Lague</a></li>
  <li><a href="https://www.youtube.com/playlist?list=PLGmrMu-IwbgtMxMiV3x4IrHPlPmg7FD-P">Youtube: The Art of Code</a></li>
  <li><a href="https://www.youtube.com/playlist?list=PL3POsQzaCw53iK_EhOYR39h1J9Lvg-m-g">Youtube: Peer Play</a></li>
</ul>


      </div>

      <div class="post-tail-wrapper text-muted">

        <!-- categories -->
        
        <div class="post-meta mb-3">
          <i class="far fa-folder-open fa-fw mr-1"></i>
          
            <a href='/categories/unity/'>Unity</a>,
            <a href='/categories/unity-study/'>Unity Study</a>
        </div>
        

        <!-- tags -->
        
        <div class="post-tags">
          <i class="fa fa-tags fa-fw mr-1"></i>
          
          <a href="/tags/unity/"
            class="post-tag no-text-decoration" >unity</a>
          
          <a href="/tags/csharp/"
            class="post-tag no-text-decoration" >csharp</a>
          
          </div>
        

        <div class="post-tail-bottom
          d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
          
          <div class="license-wrapper">
            This post is licensed under
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
            by the author.
          </div>
          

          <!--
 Post sharing snippet

 v2.1
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=레이 마칭(Ray Marching) - Rito15&url=https://rito15.github.io/posts/ray-marching/" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=레이 마칭(Ray Marching) - Rito15&u=https://rito15.github.io/posts/ray-marching/" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://telegram.me/share?text=레이 마칭(Ray Marching) - Rito15&url=https://rito15.github.io/posts/ray-marching/" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"></i>

  </span>
</div>


        </div><!-- .post-tail-bottom -->

      </div><!-- div.post-tail -->

    </div> <!-- .post -->


  </div> <!-- #post-wrapper -->

  

  

  <!--
  The Pannel on right side (Desktop views)
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">

  <div class="access">

  














  

    <div id="access-lastmod" class="post">
      <span>Recent Update</span>
      <ul class="post-content pl-0 pb-1 ml-1 mt-2">

      
        
        
        
        <li><a href="/posts/unity-animator-event-controller/">Animator Event Controller(애니메이터 이벤트 관리 컴포넌트)</a></li>
      
        
        
        
        <li><a href="/posts/simple-amplify-shader-examples/">간단한 앰플리파이 쉐이더 예제 모음</a></li>
      
        
        
        
        <li><a href="/posts/unity-shader-property-attributes/">유니티 쉐이더 프로퍼티 애트리뷰트 모음</a></li>
      
        
        
        
        <li><a href="/posts/ray-marching/">레이 마칭(Ray Marching)</a></li>
      
        
        
        
        <li><a href="/posts/unity-amplify-magical-orb/">(Amplify) Magical Orb Shader</a></li>
      

      </ul>
    </div> <!-- #access-lastmod -->

  

  















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  
    <div id="access-tags">
      <span>Trending Tags</span>
      <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/particle/">particle</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      
        
        <a class="post-tag" href="/tags/thread/">thread</a>
      
        
        <a class="post-tag" href="/tags/shadergraph/">shadergraph</a>
      

      </div>
    </div>
  
  </div> <!-- .access -->

  
    <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
      <span class="pl-3 pt-2 mb-2">Contents</span>
      <nav id="toc" data-toggle="toc"></nav>
    </div>
  

</div> <!-- #panel-wrapper -->


</div> <!-- .row -->

<div class="row">
  <div class="col-12 col-lg-11 col-xl-8">
    <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

    <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.

 v2.0
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  
    
  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  








<!-- Fill with the other newlest posts  -->






  <div id="related-posts" class="mt-5 mb-2 mb-sm-4">
    <h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/unity-study-bezier-curve/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Mar 20
  

  <i class="unloaded">2021-03-20T19:19:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>베지어 곡선(Bezier Curve)</h3>
            <div class="text-muted small">
              <p>
                





                베지어 곡선


  점과 점 사이의 선형 보간(Lerp, Linear interpolation)을 이용해 그려내는 곡선




1차 베지어 곡선



  
    Linear Curve
  
  
    2개의 점
  
  
    단순히 두 점 사이의 선형 보간을 통해, 직선을 그린다.
  






2차 베지어 곡선



  
    Quadra...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/unity-study-voxel/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Mar 26
  

  <i class="unloaded">2021-03-26T20:40:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Voxel System(유니티에서 마인크래프트 구현하기)</h3>
            <div class="text-muted small">
              <p>
                





                목차


  목표
  1. 복셀 기본
  2. 청크와 맵 데이터
  3. 텍스쳐 입히기
  4. 월드에서 청크 생성 및 관리하기
  5. 지형 만들기
  6. 캐릭터 컨트롤러 만들기
  




목표



  유튜브 강좌를 따라가며 구현한다.




유니티엔진에서 마인크래프트와 같은 복셀 시스템을 구현한다.

모든 맵과 사물은 큐브 형태를 띠고 있으며...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/unity-study-multithread-job/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Apr  4
  

  <i class="unloaded">2021-04-04T22:00:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>유니티의 멀티스레딩과 Job의 활용</h3>
            <div class="text-muted small">
              <p>
                





                유니티에서의 멀티스레딩

유니티엔진에서는 기본적으로 모든 CPU 연산이 메인 스레드에서 이루어진다.

그렇다고 다중 스레드를 사용할 수 없다는 것은 아니지만

메인 스레드가 아닌 다른 스레드에서 유니티의 메인 로직에 접근할 수 없도록 막혀있다.

다시 말해, 다른 스레드에서는 게임오브젝트, 컴포넌트 등에 접근하면 에러가 발생한다.

예를 들어

1
2...
              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->



    <!--
  Navigation buttons at the bottom of the post.

  v2.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->

<div class="post-navigation d-flex justify-content-between">
  
  <a href="/posts/unity-toy-pixelater/" class="btn btn-outline-primary">
    <p>Pixelater (픽셀화 렌더링)</p>
  </a>
  

  
  <a href="/posts/fog-of-war/" class="btn btn-outline-primary">
    <p>전장의 안개(Fog of War)</p>
  </a>
  

</div>

    

    </div> <!-- #post-extend-wrapper -->

  </div> <!-- .col-* -->

</div> <!-- .row -->



  <!-- image lazy load: https://github.com/ApoorvSaxena/lozad.js -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>

<script type="text/javascript">
  const imgs = document.querySelectorAll('.post-content img');
  const observer = lozad(imgs);
  observer.observe();
</script>




        <!--
  The Footer
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<footer class="d-flex w-100 justify-content-center">
  <div class="d-flex justify-content-between align-items-center">
    <div class="footer-left">
      <p class="mb-0">
        © 2021
        <a href="https://github.com/rito15">Rito15</a>.
        
        <span data-toggle="tooltip" data-placement="top"
          title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
        
      </p>
    </div>

    <div class="footer-right">
      <p class="mb-0">
        Powered by
        <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
        with
        <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a>
        theme.
      </p>
    </div>

  </div> <!-- div.d-flex -->
</footer>


      </div>

      <!--
  The Search results
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-xl-11 post-content">
    <div id="search-hints">
      <h4 class="text-muted mb-4">Trending Tags</h4>

      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/particle/">particle</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      
        
        <a class="post-tag" href="/tags/thread/">thread</a>
      
        
        <a class="post-tag" href="/tags/shadergraph/">shadergraph</a>
      

    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    
      <!--
  mermaid-js loader
-->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(function() {
    let initTheme = "default";

    if ($("html[mode=dark]").length > 0
      || ($("html[mode]").length == 0
        && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) {
      initTheme = "dark";
    }

    let mermaidConf = {
      theme: initTheme  /* <default|dark|forest|neutral> */
    };

    /* Markdown converts to HTML */
    $("pre").has("code.language-mermaid").each(function() {
      let svgCode = $(this).children().html();
      $(this).addClass("unloaded");
      $(this).after(`<div class=\"mermaid\">${svgCode}</div>`);
    });

    mermaid.initialize(mermaidConf);
  });
</script>

    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    <!--
  Jekyll Simple Search loader
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="https://rito15.github.io{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    <div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div>    <div><i class="fa fa-tag fa-fw"></i>{tags}</div>  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No result founds.</p>'
});
</script>


    <!-- 2021-06-29 추가 : 애널리틱스 적용 -->
    <!--
  The GA snippet
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JV8DN2JPP7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JV8DN2JPP7');
</script>

  </body>

</html>

