<!DOCTYPE html>



<html lang="en" 
  
    mode="dark"
  
>

  <!--
  The Head
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme" content="Chirpy v2.7.2">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Voxel System" />
<meta name="author" content="Rito15" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="목차" />
<meta property="og:description" content="목차" />
<link rel="canonical" href="https://rito15.github.io/posts/unity-study-voxel/" />
<meta property="og:url" content="https://rito15.github.io/posts/unity-study-voxel/" />
<meta property="og:site_name" content="Rito15" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-26T20:40:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Voxel System" />
<meta name="google-site-verification" content="google_meta_tag_verification" />
<script type="application/ld+json">
{"description":"목차","datePublished":"2021-03-26T20:40:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rito15.github.io/posts/unity-study-voxel/"},"url":"https://rito15.github.io/posts/unity-study-voxel/","author":{"@type":"Person","name":"Rito15"},"headline":"Voxel System","dateModified":"2021-03-28T02:13:04+09:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <title>Voxel System | Rito15
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2019 Cotes Chung
  Published under the MIT license
-->



<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">

<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- GA -->
  

  <!-- jsDelivr CDN -->
  <link rel="preconnect" href="cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="cdn.jsdelivr.net">

  <!-- Bootstrap -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous">

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"
    integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ="
    crossorigin="anonymous">

  <!--
  CSS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->






<link rel="preload" href="/assets/css/post.css" as="style">
<link rel="stylesheet" href="/assets/css/post.css">


  
    <link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css">
    <link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" />
  



  <!-- JavaScripts -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

  <script defer
    src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>

  <!--
  JS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->





<script async src="/assets/js/post.min.js"></script>


  <!-- MathJax -->
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>





</head>


  <body data-spy="scroll" data-target="#toc">

    <!--
  The Side Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="sidebar" class="d-flex flex-column align-items-end">

  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" alt="avatar" class="mx-auto">
        
        <img src="/assets/img/favicons/android-icon-192x192.png" alt="avatar" onerror="this.style.display='none'">
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="/">Rito15</a>
    </div>

    <div class="site-subtitle font-italic">Unity Csharp Developer</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">
    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/tabs/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/tags/" class="nav-link">
        <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i>
        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/about/" class="nav-link">
        <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center">

    
      

      
      <a href="https://github.com/rito15" aria-label="github"
        
        target="_blank" rel="noopener">
        <i class="fab fa-github-alt"></i>
      </a>
      

    
      

      
      <a href="
          javascript:location.href = 'mailto:' + ['ghdtkals15','gmail.com'].join('@')" aria-label="email"
        
        >
        <i class="fas fa-envelope"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        
        >
        <i class="fas fa-rss"></i>
      </a>
      

    

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="topbar-wrapper" class="row justify-content-center topbar-down">
  <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    <span id="breadcrumb">
      
        
        <span>
          <a href="/">
            Posts
          </a>
        </span>
        
      

      
        <span>Voxel System</span>
      

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" placeholder="Search...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper">
      <div id="main">

        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->


<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->


<!-- Add attribute 'hide-bullet' to the checkbox list -->




  

  

  <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->
  
  

  

  



<!-- return -->
<div class="row">

  <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">

    <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

      <h1 data-toc-skip>Voxel System</h1>

      <div class="post-meta text-muted d-flex flex-column">
        <!-- Published date and author -->
        <div>
          <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago "
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Fri, Mar 26, 2021,  8:40 PM +0900"
  >

  
  

  
    Mar 26
  

  <i class="unloaded">2021-03-26T20:40:00+09:00</i>

</span>
          by
          <span class="author">
            Rito15
          </span>
        </div>

        <div>
          <!-- lastmod -->
          
          <span>
            Updated
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago lastmod"
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Sun, Mar 28, 2021,  2:13 AM +0900"
  >

  
  

  
    Mar 28
  

  <i class="unloaded">2021-03-28T02:13:04+09:00</i>

</span>
          </span>
          

          <!-- read time -->
          <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->






<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5029 words">27 min</span>


          <!-- page views -->
          

        </div>

      </div> <!-- .post-meta -->

      <div class="post-content">

        

        <h1 id="목차">목차</h1>

<ul>
  <li><a href="#개요">개요</a></li>
  <li><a href="#1-복셀-기본">1. 복셀 기본</a></li>
  <li><a href="#2-청크와-맵-데이터">2. 청크와 맵 데이터</a></li>
  <li><a href="#3-텍스쳐-입히기">3. 텍스쳐 입히기</a></li>
  <li><a href="#"></a></li>
</ul>

<p><br /></p>

<h1 id="개요">개요</h1>
<hr />

<p>유니티엔진에서 마인크래프트와 같은 복셀 시스템을 구현한다.</p>

<p>모든 맵과 사물은 큐브 형태를 띠고 있으며, 생성하거나 파괴할 수 있다.</p>

<p>각각의 큐브를 개별 오브젝트로 렌더링할 경우 부하가 굉장히 크기 때문에,</p>

<p>일정 영역의 큐브들을 모아 하나의 청크(Chunk)이자 하나의 메시로 관리하는 것이 핵심이다.</p>

<p><br /></p>

<h1 id="1-복셀-기본">1. 복셀 기본</h1>
<hr />

<h2 id="큐브의-정점-데이터-정의"><strong>큐브의 정점 데이터 정의</strong></h2>

<ul>
  <li>복셀 시스템에서 사용하기 위해, 육면체 내에서 각 정점들의 인덱스 순서와 상대 위치를 미리 약속된 값으로 정의한다.</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112629589-da522100-8e77-11eb-92ec-d8fbc9b0da8e.png" alt="image" /></p>

<p><br /></p>

<h2 id="lutlookup-table"><strong>LUT(LookUp Table)</strong></h2>

<ul>
  <li>육면체의 정점, 삼각형, UV를 손쉽게 참조하기 위한 LUT를 정의한다.</li>
</ul>

<details>
  <summary> 
VoxelData.cs
</summary>

  <div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">VoxelData</span>
<span class="p">{</span>
    <span class="cm">/***********************************************************************
    *                               Lookup Tables
    ***********************************************************************/</span>
    <span class="err">#</span><span class="n">region</span> <span class="p">.</span>

    <span class="cm">/* 
            7 ──── 6    
          / │       / │
        3 ──── 2   │
        │  │     │  │
        │  4───│─5  
        │/        │/
        0 ──── 1
    */</span>
    <span class="c1">/// &lt;summary&gt; 큐브의 8개 버텍스의 상대 위치 &lt;/summary&gt;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="n">voxelVerts</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[</span><span class="m">8</span><span class="p">]</span>
    <span class="p">{</span>
        <span class="c1">// Front</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// LB</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// RB</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// RT</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// LT</span>

        <span class="c1">// Back</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// LB</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// RB</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// RT</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// LT</span>
    <span class="p">};</span>

    <span class="c1">// 한 면을 이루는 삼각형은 2개</span>
    <span class="c1">// 버텍스 인덱스는 시계방향으로 배치(전면으로 그려지도록)</span>
    <span class="c1">// 각 면의 버텍스 순서는 해당 면을 기준으로 LB-LT-RB, RB-LT-RT</span>
    <span class="cm">/*
        LB-LT-RB   RB-LT-RT

        1          1 ㅡ 2
        | ＼         ＼ |
        0 ㅡ 2          0
    */</span>
    <span class="c1">/// &lt;summary&gt; 큐브의 각 면을 이루는 삼각형들의 버텍스 인덱스 데이터 &lt;/summary&gt;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span><span class="p">[,]</span> <span class="n">voxelTris</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="m">6</span><span class="p">,</span> <span class="m">6</span><span class="p">]</span>
    <span class="p">{</span>
        <span class="p">{</span><span class="m">0</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">2</span> <span class="p">},</span> <span class="c1">// Back Face   (-Z)</span>
        <span class="p">{</span><span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span> <span class="p">},</span> <span class="c1">// Front Face  (+Z)</span>
        <span class="p">{</span><span class="m">3</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">6</span> <span class="p">},</span> <span class="c1">// Top Face    (+Y)</span>
        <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">4</span> <span class="p">},</span> <span class="c1">// Bottom Face (-Y)</span>
        <span class="p">{</span><span class="m">4</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">3</span> <span class="p">},</span> <span class="c1">// Left Face   (-X)</span>
        <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">6</span> <span class="p">},</span> <span class="c1">// RIght Face  (+X)</span>
    <span class="p">};</span>

    <span class="c1">/// &lt;summary&gt; voxelTris의 버텍스 인덱스 순서에 따라 정의된 UV 좌표 데이터 &lt;/summary&gt;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="n">voxelUvs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[</span><span class="m">6</span><span class="p">]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// LB</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// LT</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// RB</span>

        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// RB</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// LT</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// RT</span>
    <span class="p">};</span>

    <span class="err">#</span><span class="n">endregion</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>

<p><br /></p>

<h2 id="청크"><strong>청크</strong></h2>

<ul>
  <li>
    <p>일단 한 개의 정육면체로 이루어진 기본적인 청크를 정의한다.</p>
  </li>
  <li>
    <p>6방향의 면을 모두 그려낸다.</p>
  </li>
  <li>
    <p>LUT를 활용하여 메시의 정점, 삼각형, UV 데이터를 반복문을 통해 효율적으로 정의할 수 있다.</p>
  </li>
</ul>

<details>
  <summary> 
Chunk.cs
</summary>

  <div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">Chunk</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">MeshRenderer</span> <span class="n">meshRenderer</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">MeshFilter</span> <span class="n">meshFilter</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">vertexIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="n">Vector3</span><span class="p">&gt;</span> <span class="n">vertices</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Vector3</span><span class="p">&gt;();</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">triangles</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="n">Vector2</span><span class="p">&gt;</span> <span class="n">uvs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Vector2</span><span class="p">&gt;();</span>

        <span class="c1">// 6방향의 면 그리기</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">p</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">p</span> <span class="p">&lt;</span> <span class="m">6</span><span class="p">;</span> <span class="n">p</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="c1">// 각 면의 삼각형 2개 그리기</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">6</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">triangleIndex</span> <span class="p">=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelTris</span><span class="p">[</span><span class="n">p</span><span class="p">,</span> <span class="n">i</span><span class="p">];</span>

                <span class="n">vertices</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelVerts</span><span class="p">[</span><span class="n">triangleIndex</span><span class="p">]);</span>
                <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span><span class="p">);</span>
                <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelUvs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>

                <span class="n">vertexIndex</span><span class="p">++;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// 메시에 데이터들 초기화</span>
        <span class="n">Mesh</span> <span class="n">mesh</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mesh</span>
        <span class="p">{</span>
            <span class="n">vertices</span> <span class="p">=</span> <span class="n">vertices</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">(),</span>
            <span class="n">triangles</span> <span class="p">=</span> <span class="n">triangles</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">(),</span>
            <span class="n">uv</span> <span class="p">=</span> <span class="n">uvs</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">()</span>
        <span class="p">};</span>

        <span class="n">mesh</span><span class="p">.</span><span class="nf">RecalculateNormals</span><span class="p">();</span> <span class="c1">// 필수</span>

        <span class="n">meshFilter</span><span class="p">.</span><span class="n">mesh</span> <span class="p">=</span> <span class="n">mesh</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>

<p><br /></p>

<h2 id="복셀-시스템의-텍스쳐"><strong>복셀 시스템의 텍스쳐</strong></h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Max Size</code>는 적당히 작게 설정한다. (강좌에서는 32)</li>
  <li><code class="language-plaintext highlighter-rouge">Wrap Mode</code>는 Clamp로, UV를 벗어나는 경우 반복되지 않게 한다.</li>
  <li><code class="language-plaintext highlighter-rouge">Filter Mode</code>는 Point로 설정하여 텍셀이 부드럽게 보간되지 않게 한다.</li>
</ul>

<p><br /></p>

<h2 id="현재-상태"><strong>현재 상태</strong></h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112628321-197f7280-8e76-11eb-9b6e-cdf298d67561.png" alt="image" /></p>

<p><br /></p>

<h1 id="2-청크와-맵-데이터">2. 청크와 맵 데이터</h1>
<hr />

<h2 id="정점-데이터-절약하기"><strong>정점 데이터 절약하기</strong></h2>

<p>사각형을 그리려면 2개의 삼각형을 그려야 한다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112721251-413e0b80-8f46-11eb-8fed-fad137b971e0.png" alt="image" /></p>

<p>첫 번째 삼각형은 3개의 정점으로 [LB - LT - RB], 두 번째 삼각형은 [RB - LT - RT]로 이루어져 있다.</p>

<p>따라서 <code class="language-plaintext highlighter-rouge">voxelTris</code> LUT를 만들 때 큐브의 6개의 면마다 각각 6개의 정점 인덱스로 총 36개의 정점 데이터를 이용했고,</p>

<p>메시의 <code class="language-plaintext highlighter-rouge">vertices</code> 배열에도 동일하게 버텍스를 추가했다.</p>

<p><br /></p>

<p>그런데 사각형에는 실제로 네 개의 정점이 존재하므로 이렇게 하면 큐브의 면마다 정점 두 개만큼의 데이터가 낭비되는 셈이다.</p>

<p>따라서 LUT에는 정점 6개가 아니라 4개씩만 정의하고, 메시의 <code class="language-plaintext highlighter-rouge">vertices</code> 배열에도 면마다 4개의 정점만 추가한다.</p>

<p>그리고 <code class="language-plaintext highlighter-rouge">uvs</code> 배열에도 마찬가지로 면마다 4개의 정점을 추가한다.</p>

<p>대신에 <code class="language-plaintext highlighter-rouge">triangles</code> 배열에 <code class="language-plaintext highlighter-rouge">vertices</code>의 인덱스를 추가할 때 순차적으로 (i ~ i + 6)의 인덱스를 참조하는 것이 아니라, 알맞은 정점 인덱스를 찾아 추가하면 된다.</p>

<p><br /></p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="rouge-code"><pre><span class="c1">// [1] VoxelData.cs</span>

<span class="c1">// LUT - tris data (vertex indices)</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span><span class="p">[,]</span> <span class="n">voxelTris</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="m">6</span><span class="p">,</span> <span class="m">4</span><span class="p">]</span>
<span class="p">{</span>
    <span class="p">{</span><span class="m">0</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span> <span class="p">},</span> <span class="c1">// Back Face   (-Z)</span>
    <span class="p">{</span><span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">7</span> <span class="p">},</span> <span class="c1">// Front Face  (+Z)</span>
    <span class="p">{</span><span class="m">3</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">6</span> <span class="p">},</span> <span class="c1">// Top Face    (+Y)</span>
    <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">4</span> <span class="p">},</span> <span class="c1">// Bottom Face (-Y)</span>
    <span class="p">{</span><span class="m">4</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">3</span> <span class="p">},</span> <span class="c1">// Left Face   (-X)</span>
    <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span> <span class="p">},</span> <span class="c1">// RIght Face  (+X)</span>
<span class="p">};</span>

<span class="c1">// LUT - uv data</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="n">voxelUvs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[</span><span class="m">4</span><span class="p">]</span>
<span class="p">{</span>
    <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// LB</span>
    <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// LT</span>
    <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// RB</span>
    <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="m">1.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">),</span> <span class="c1">// RT</span>
<span class="p">};</span>


<span class="c1">// [2] Chunk.cs</span>

<span class="c1">// 1. Vertex, UV 4개 추가</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">3</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
<span class="p">{</span>
    <span class="n">vertices</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelVerts</span><span class="p">[</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelTris</span><span class="p">[</span><span class="n">p</span><span class="p">,</span> <span class="n">i</span><span class="p">]]</span> <span class="p">+</span> <span class="n">pos</span><span class="p">);</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelUvs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// 2. Triangle의 버텍스 인덱스 6개 추가</span>
<span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span><span class="p">);</span>
<span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
<span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>

<span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>
<span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
<span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">3</span><span class="p">);</span>

<span class="n">vertexIndex</span> <span class="p">+=</span> <span class="m">4</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h2 id="복셀-맵-구성"><strong>복셀 맵 구성</strong></h2>

<p>큐브 하나의 크기는 1 x 1 x 1로 정의한다고 할 때,</p>

<p>전체 복셀 맵은 간단히 [x, y, z] 좌표에 큐브가 존재하는지(is solid) 여부로 결정할 수 있다.</p>

<p>따라서 bool 타입의 3차원 배열로 맵을 정의할 수 있다.</p>

<p><br /></p>

<p>우선 VoxelData 클래스에서 Chunk의 width(x, z 크기), height(y 크기)를 정의한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">// VoxelData.cs</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">ChunkWidth</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">ChunkHeight</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 이를 복셀 맵 배열의 크기로 사용한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">// Chunk.cs</span>

<span class="k">private</span> <span class="kt">bool</span> <span class="p">[,,]</span> <span class="n">voxelMap</span> <span class="p">=</span> 
  <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span><span class="p">,</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkHeight</span><span class="p">,</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<p>이제 voxelMap[x, y, z] == true인 좌표마다 크기가 1인 큐브 메시를 만들면 된다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="rouge-code"><pre><span class="c1">// Chunk.cs</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">CreateMeshData</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">y</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">y</span> <span class="p">&lt;</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkHeight</span><span class="p">;</span> <span class="n">y</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">x</span> <span class="p">&lt;</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span><span class="p">;</span> <span class="n">x</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">z</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">z</span> <span class="p">&lt;</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span><span class="p">;</span> <span class="n">z</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="nf">AddVoxelDataToChunk</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">AddVoxelDataToChunk</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">pos</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// 6방향의 면 그리기</span>
    <span class="c1">// p : -Z, +Z, +Y, -Y, -X, +X 순서로 이루어진, 큐브의 각 면에 대한 인덱스</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">p</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">p</span> <span class="p">&lt;</span> <span class="m">6</span><span class="p">;</span> <span class="n">p</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">voxelMap</span><span class="p">[(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="n">z</span><span class="p">])</span>
            <span class="k">continue</span><span class="p">;</span>

        <span class="c1">// 각 면(삼각형 2개) 그리기</span>

        <span class="c1">// 1. Vertex, UV 4개 추가</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">3</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">vertices</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelVerts</span><span class="p">[</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelTris</span><span class="p">[</span><span class="n">p</span><span class="p">,</span> <span class="n">i</span><span class="p">]]</span> <span class="p">+</span> <span class="n">pos</span><span class="p">);</span>
            <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelUvs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>

        <span class="c1">// 2. Triangle의 버텍스 인덱스 6개 추가</span>
        <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span><span class="p">);</span>
        <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>

        <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>
        <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">3</span><span class="p">);</span>

        <span class="n">vertexIndex</span> <span class="p">+=</span> <span class="m">4</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그런데 현재 상태로 그냥 메시를 만들면 외부에서 보이지 않는 청크 내부에도 폴리곤이 만들어진다.</p>

<p>이렇게 하면 청크를 만드는 의미가 없으므로, 외부에 드러난 면만 폴리곤이 만들어지도록 해주어야 한다.</p>

<p><br /></p>

<h2 id="청크의-바깥-면만-그려주기"><strong>청크의 바깥 면만 그려주기</strong></h2>

<p>큐브가 존재하는 부분(solid)은 voxelMap[x, y, z]의 true/false 여부로 판정할 수 있게 되었지만,</p>

<p>각 면이 바깥 면인지 여부는 아직 알 수 없다.</p>

<p>따라서 이를 판정할 수 있도록 해주어야 한다.</p>

<p><br /></p>

<p>우선, 새로운 LUT를 만들어준다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1">// VoxelData.cs</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="n">faceChecks</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[</span><span class="m">6</span><span class="p">]</span>
<span class="p">{</span>
    <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span> <span class="m">0.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">,</span> <span class="p">-</span><span class="m">1.0f</span><span class="p">),</span> <span class="c1">// Back Face   (-Z)</span>
    <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span> <span class="m">0.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">,</span> <span class="p">+</span><span class="m">1.0f</span><span class="p">),</span> <span class="c1">// Front Face  (+Z)</span>
    <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span> <span class="m">0.0f</span><span class="p">,</span> <span class="p">+</span><span class="m">1.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// Top Face    (+Y)</span>
    <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span> <span class="m">0.0f</span><span class="p">,</span> <span class="p">-</span><span class="m">1.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// Bottom Face (-Y)</span>
    <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(-</span><span class="m">1.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// Left Face   (-X)</span>
    <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(+</span><span class="m">1.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">),</span> <span class="c1">// RIght Face  (+X)</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></div></div>

<p>voxelTris(큐브의 6개 면마다 각각 정점 인덱스 순서) 배열의 면 순서와 동일하게,</p>

<p>faceChecks 배열을 정의한다.</p>

<p>그리고 특정 좌표가 solid인지 확인하는 메소드를 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c1">// Chunk.cs</span>

<span class="k">private</span> <span class="kt">bool</span> <span class="nf">CheckVoxel</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">pos</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">FloorToInt</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">FloorToInt</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">z</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">FloorToInt</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>

    <span class="c1">// 맵 범위를 벗어나는 경우</span>
    <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">x</span> <span class="p">&gt;</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span> <span class="p">-</span> <span class="m">1</span> <span class="p">||</span> 
       <span class="n">y</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">y</span> <span class="p">&gt;</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkHeight</span> <span class="p">-</span> <span class="m">1</span> <span class="p">||</span>
       <span class="n">z</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">z</span> <span class="p">&gt;</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">voxelMap</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<p>이제 faceChecks 배열과 CheckVoxel() 메소드를 이용하여 청크의 바깥 면만 그려지도록 AddVoxelDataToChunk() 메소드를 수정한다.</p>

<p>원리는 간단하다.</p>

<p>큐브가 그려질 좌표에서 6개의 면마다 faceCheck를 통해 해당 면이 바라보는 방향으로 1칸 이동한 지점이 solid(true)이면 해당 면은 청크의 내부를 바라보고 있다는 의미이므로 그리지 않고,</p>

<p>false일 경우 청크의 외부를 바라보고 있다는 것이므로, 다시 말해 청크의 바깥 면이라는 것을 의미하기 때문에 해당 면은 그려주면 된다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="c1">// Chunk.cs</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">AddVoxelDataToChunk</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">pos</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// 6방향의 면 그리기</span>
    <span class="c1">// p : -Z, +Z, +Y, -Y, -X, +X 순서로 이루어진, 큐브의 각 면에 대한 인덱스</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">p</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">p</span> <span class="p">&lt;</span> <span class="m">6</span><span class="p">;</span> <span class="n">p</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="c1">// Face Check(면이 바라보는 방향으로 +1 이동하여 확인)를 했을 때 </span>
        <span class="c1">// Solid가 아닌 경우에만 큐브의 면이 그려지도록 하기</span>
        <span class="c1">// =&gt; 청크의 외곽 부분만 면이 그려지고, 내부에는 면이 그려지지 않도록</span>
        <span class="k">if</span> <span class="p">(</span><span class="nf">CheckVoxel</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="nf">CheckVoxel</span><span class="p">(</span><span class="n">pos</span> <span class="p">+</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">faceChecks</span><span class="p">[</span><span class="n">p</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="c1">// 각 면(삼각형 2개) 그리기</span>

            <span class="c1">// 1. Vertex, UV 4개 추가</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">3</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="n">vertices</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelVerts</span><span class="p">[</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelTris</span><span class="p">[</span><span class="n">p</span><span class="p">,</span> <span class="n">i</span><span class="p">]]</span> <span class="p">+</span> <span class="n">pos</span><span class="p">);</span>
                <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelUvs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>

            <span class="c1">// 2. Triangle의 버텍스 인덱스 6개 추가</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>

            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">3</span><span class="p">);</span>

            <span class="n">vertexIndex</span> <span class="p">+=</span> <span class="m">4</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h2 id="현재-상태-1"><strong>현재 상태</strong></h2>

<ul>
  <li>[1] 5 x 5 x 5 맵의 모든 부분이 true(solid)인 경우</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112720764-d4297680-8f43-11eb-8746-c174c7186a0f.png" alt="image" /></p>

<ul>
  <li>[2] voxelMap[x, y, z] = (x &gt;= y &amp;&amp; z &gt;= y)</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112720809-0044f780-8f44-11eb-8fb2-672e3367d2c0.png" alt="image" /></p>

<p><br /></p>

<h1 id="3-텍스쳐-입히기">3. 텍스쳐 입히기</h1>
<hr />

<h2 id="블록-타입-정의"><strong>블록 타입 정의</strong></h2>

<p>현재 bool타입의 <code class="language-plaintext highlighter-rouge">voxelMap</code>으로는 해당 좌표에 블록이 존재하는지 여부만 판단할 수 있다.</p>

<p>하지만 텍스쳐를 입히기 위해서는 블록의 타입을 구체적으로 정의할 필요가 있다.</p>

<p>우선 <code class="language-plaintext highlighter-rouge">BlockType</code> 클래스를 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BlockType</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">blockName</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">isSolid</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 각 블록타입들에 대한 정보를 배열로 가지고 있도록 하기 위한 <code class="language-plaintext highlighter-rouge">World</code> 컴포넌트 클래스를 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">World</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Material</span> <span class="n">material</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">BlockType</span><span class="p">[]</span> <span class="n">blockTypes</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>하이라키에서 <code class="language-plaintext highlighter-rouge">World</code> 게임오브젝트를 만들고 여기에 컴포넌트로 추가한 다음, 배열의 0번 인덱스에 <code class="language-plaintext highlighter-rouge">Default</code> 블록 타입을 만들어준다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112747437-6b4c0800-8ff0-11eb-9e02-9b1636d778e6.png" alt="image" /></p>

<p><br /></p>

<p>이제 <code class="language-plaintext highlighter-rouge">Chunk</code> 클래스의 내용을 수정한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="c1">// bool -&gt; byte 타입 배열로 변경</span>
<span class="k">private</span> <span class="kt">byte</span> <span class="p">[,,]</span> <span class="n">voxelMap</span> <span class="p">=</span> 
  <span class="k">new</span> <span class="kt">byte</span><span class="p">[</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span><span class="p">,</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkHeight</span><span class="p">,</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">ChunkWidth</span><span class="p">];</span>

<span class="c1">// World 컴포넌트 참조(Start() 내부에서 FindObjectOfType&lt;World&gt;())</span>
<span class="k">private</span> <span class="n">World</span> <span class="n">world</span><span class="p">;</span>


<span class="k">private</span> <span class="kt">bool</span> <span class="nf">CheckVoxel</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">pos</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="c1">// voxelMap[]의 값은 blockTypes[]의 인덱스로 사용하여,</span>
    <span class="c1">// 참조한 블록 타입에서 isSolid 값을 읽어온다.</span>
    <span class="k">return</span> <span class="n">world</span><span class="p">.</span><span class="n">blockTypes</span><span class="p">[</span><span class="n">voxelMap</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]].</span><span class="n">isSolid</span><span class="p">;</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h2 id="텍스쳐-아틀라스-사용하기"><strong>텍스쳐 아틀라스 사용하기</strong></h2>

<p>서로 다른 텍스쳐를 통째로 준비하고, 각 블록마다 다르게 입혀주려면</p>

<p>마테리얼을 분리하거나, 커스텀 쉐이더를 작성하여 필요한 텍스쳐 프로퍼티를 모두 만들어주어야 하는데</p>

<p>이는 모두 비효율적이므로</p>

<p>여러 장의 텍스쳐가 동일한 크기로 포함되어 있는 텍스쳐 아틀라스를 사용한다.</p>

<p><a href="https://www.kenney.nl/">https://www.kenney.nl/</a> 에서 무료 복셀 텍스쳐 아틀라스를 다운받아 사용하였다.</p>

<p><br /></p>

<p>예를 들어</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112750486-d226ec80-9003-11eb-93bb-cc52c4e64544.png" alt="image" /></p>

<p>이런 텍스쳐 아틀라스를 준비했을 때,</p>

<p>가로 세로 9x10 크기로 총 90개의 텍스쳐가 아틀라스 내에 들어갈 수 있다.</p>

<p>그리고 다른 크기의 아틀라스를 사용할 것을 대비하여, 월드 내에서 사용할 텍스쳐 아틀라스의 크기를 변수값으로 정의한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1">// VoxelData.cs</span>

<span class="c1">// 텍스쳐 아틀라스의 가로, 세로 텍스쳐 개수</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">TextureAtlasWidth</span> <span class="p">=</span> <span class="m">9</span><span class="p">;</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">TextureAtlasHeight</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>

<span class="c1">// 텍스쳐 아틀라스 내에서 각 행, 열마다 텍스쳐가 갖는 크기 비율</span>
<span class="k">public</span> <span class="k">static</span> <span class="kt">float</span> <span class="n">NormalizedTextureAtlasWidth</span>
    <span class="p">=&gt;</span> <span class="m">1f</span> <span class="p">/</span> <span class="n">TextureAtlasWidth</span><span class="p">;</span>
<span class="k">public</span> <span class="k">static</span> <span class="kt">float</span> <span class="n">NormalizedTextureAtlasHeight</span>
    <span class="p">=&gt;</span> <span class="m">1f</span> <span class="p">/</span> <span class="n">TextureAtlasHeight</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<p>이제 텍스쳐 아틀라스 내의 각 텍스쳐를 참조할 인덱스(텍스쳐ID)를 미리 정의해야 한다.</p>

<p>유니티에서의 UV 좌표는 좌하단이 (0,0)이므로 좌하단의 텍스쳐를 인덱스 0으로 사용할 수도 있고,</p>

<p>여기서는 강좌를 따라 좌상단의 텍스쳐를 인덱스 0으로 정의하여 사용할 것이다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112750573-511c2500-9004-11eb-8a5b-3bc334c03bf9.png" alt="spritesheet_tiles_reference" /></p>

<p>그리고 텍스쳐의 인덱스를 통해 아틀라스 내의 해당 텍스쳐가 갖는 uv 좌표를 얻어오는 메소드를 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="rouge-code"><pre><span class="c1">// Chunk.cs</span>

<span class="c1">/// &lt;summary&gt; 텍스쳐 아틀라스 내에서 해당하는 ID의 텍스쳐가 위치한 UV를 uvs 리스트에 추가 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">AddTextureUV</span><span class="p">(</span><span class="kt">int</span> <span class="n">textureID</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// 아틀라스 내의 텍스쳐 가로, 세로 개수</span>
    <span class="p">(</span><span class="kt">int</span> <span class="n">w</span><span class="p">,</span> <span class="kt">int</span> <span class="n">h</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">TextureAtlasWidth</span><span class="p">,</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">TextureAtlasHeight</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="n">textureID</span> <span class="p">%</span> <span class="n">w</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="p">=</span> <span class="n">h</span> <span class="p">-</span> <span class="p">(</span><span class="n">textureID</span> <span class="p">/</span> <span class="n">w</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>

    <span class="nf">AddTextureUV</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// (x, y) : (0, 0) 기준은 좌하단</span>
<span class="c1">/// &lt;summary&gt; 텍스쳐 아틀라스 내에서 (x, y) 위치의 텍스쳐 UV를 uvs 리스트에 추가 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">AddTextureUV</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">y</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">x</span> <span class="p">&gt;=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">TextureAtlasWidth</span> <span class="p">||</span> <span class="n">y</span> <span class="p">&gt;=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">TextureAtlasHeight</span><span class="p">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfRangeException</span><span class="p">(</span><span class="s">$"텍스쳐 아틀라스의 범위를 벗어났습니다 : [x = </span><span class="p">{</span><span class="n">x</span><span class="p">}</span><span class="s">, y = </span><span class="p">{</span><span class="n">y</span><span class="p">}</span><span class="s">]"</span><span class="p">);</span>

    <span class="kt">float</span> <span class="n">nw</span> <span class="p">=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">NormalizedTextureAtlasWidth</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">nh</span> <span class="p">=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">NormalizedTextureAtlasHeight</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">uvX</span> <span class="p">=</span> <span class="n">x</span> <span class="p">*</span> <span class="n">nw</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">uvY</span> <span class="p">=</span> <span class="n">y</span> <span class="p">*</span> <span class="n">nh</span><span class="p">;</span>

    <span class="c1">// 해당 텍스쳐의 uv를 LB-LT-RB-RT 순서로 추가</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span><span class="p">,</span> <span class="n">uvY</span><span class="p">));</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span><span class="p">,</span> <span class="n">uvY</span> <span class="p">+</span> <span class="n">nh</span><span class="p">));</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span> <span class="p">+</span> <span class="n">nw</span><span class="p">,</span> <span class="n">uvY</span><span class="p">));</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span> <span class="p">+</span> <span class="n">nw</span><span class="p">,</span> <span class="n">uvY</span> <span class="p">+</span> <span class="n">nh</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 AddVoxelDataToChunk() 메소드에서 UV를 추가하던 부분을 변경한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1">// Chunk.cs - AddVoxelDataToChunk()</span>

<span class="c1">// 기존</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">3</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
<span class="p">{</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelUvs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// 변경</span>
<span class="nf">AddTextureUV</span><span class="p">(</span><span class="m">43</span><span class="p">);</span> <span class="c1">// 텍스쳐 ID</span>
</pre></td></tr></tbody></table></code></div></div>

<p>새로운 마테리얼을 생성하여, <code class="language-plaintext highlighter-rouge">Unlit/Texture</code> 쉐이더를 지정하고 텍스쳐 아틀라스를 넣어준다.</p>

<p>그리고 이 마테리얼을 Chunk에 적용해준다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112750699-16ff5300-9005-11eb-894d-c90793553b3e.png" alt="image" /></p>

<p>결과 :</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112750714-2bdbe680-9005-11eb-88de-f3d63a3c761c.png" alt="image" /></p>

<p><br /></p>

<h2 id="블록의-면마다-텍스쳐-id-지정하기"><strong>블록의 면마다 텍스쳐 ID 지정하기</strong></h2>

<p>하나의 블록이라도 윗면, 옆면, 아랫면에 따라 텍스쳐가 다르게 입혀져야 한다.</p>

<p>따라서 <code class="language-plaintext highlighter-rouge">BlockType</code> 클래스를 수정한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="c1">// VoxelData class</span>
<span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">BackFace</span>   <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">FrontFace</span>  <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
<span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">TopFace</span>    <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
<span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">BottomFace</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span>
<span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">LeftFace</span>   <span class="p">=</span> <span class="m">4</span><span class="p">;</span>
<span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">RightFace</span>  <span class="p">=</span> <span class="m">5</span><span class="p">;</span>


<span class="c1">// BlockType class</span>
<span class="k">public</span> <span class="kt">string</span> <span class="n">blockName</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">bool</span> <span class="n">isSolid</span><span class="p">;</span>

<span class="p">[</span><span class="nf">Header</span><span class="p">(</span><span class="s">"Texture IDs"</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">topFaceTextureID</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">frontFaceTextureID</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">backFaceTextureID</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">leftFaceTextureID</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">rightFaceTextureID</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">bottomFaceTextureID</span><span class="p">;</span>

<span class="c1">// Order : Back, Front, Top, Bottom, Left, Right</span>
<span class="c1">/// &lt;summary&gt; Face Index(0~5)에 해당하는 텍스쳐 ID 리턴 &lt;/summary&gt;</span>
<span class="k">public</span> <span class="kt">int</span> <span class="nf">GetTextureID</span><span class="p">(</span><span class="kt">int</span> <span class="n">faceIndex</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">faceIndex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">TopFace</span><span class="p">:</span>    <span class="k">return</span> <span class="n">topFaceTextureID</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">FrontFace</span><span class="p">:</span>  <span class="k">return</span> <span class="n">frontFaceTextureID</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">BackFace</span><span class="p">:</span>   <span class="k">return</span> <span class="n">backFaceTextureID</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">LeftFace</span><span class="p">:</span>   <span class="k">return</span> <span class="n">leftFaceTextureID</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">RightFace</span><span class="p">:</span>  <span class="k">return</span> <span class="n">rightFaceTextureID</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">BottomFace</span><span class="p">:</span> <span class="k">return</span> <span class="n">bottomFaceTextureID</span><span class="p">;</span>

        <span class="k">default</span><span class="p">:</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfRangeException</span><span class="p">(</span><span class="s">$"Face Index must be in 0 ~ 5, but input : </span><span class="p">{</span><span class="n">faceIndex</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<p>그리고 <code class="language-plaintext highlighter-rouge">Chunk</code> 클래스에 다음 메소드를 추가하고,</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1">/// &lt;summary&gt; voxelMap으로부터 특정 위치에 해당하는 블록 ID 가져오기 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="kt">byte</span> <span class="nf">GetBlockID</span><span class="p">(</span><span class="k">in</span> <span class="n">Vector3</span> <span class="n">pos</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">voxelMap</span><span class="p">[(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="n">z</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><code class="language-plaintext highlighter-rouge">AddVoxelDataToChunk()</code> 메소드를 수정한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">AddVoxelDataToChunk</span><span class="p">(</span><span class="k">in</span> <span class="n">Vector3</span> <span class="n">pos</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// 6방향의 면 그리기</span>
    <span class="c1">// face : -Z, +Z, +Y, -Y, -X, +X 순서로 이루어진, 큐브의 각 면에 대한 인덱스</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">face</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">face</span> <span class="p">&lt;</span> <span class="m">6</span><span class="p">;</span> <span class="n">face</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="c1">// Face Check(면이 바라보는 방향으로 +1 이동하여 확인)를 했을 때 </span>
        <span class="c1">// Solid가 아닌 경우에만 큐브의 면이 그려지도록 하기</span>
        <span class="c1">// =&gt; 청크의 외곽 부분만 면이 그려지고, 내부에는 면이 그려지지 않도록</span>

        <span class="c1">// 각 면(삼각형 2개) 그리기</span>
        <span class="k">if</span> <span class="p">(</span><span class="nf">CheckVoxel</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="nf">CheckVoxel</span><span class="p">(</span><span class="n">pos</span> <span class="p">+</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">faceChecks</span><span class="p">[</span><span class="n">face</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="kt">byte</span> <span class="n">blockID</span> <span class="p">=</span> <span class="nf">GetBlockID</span><span class="p">(</span><span class="n">pos</span><span class="p">);</span>

            <span class="c1">// 1. Vertex 4개 추가</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">3</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="n">vertices</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelVerts</span><span class="p">[</span><span class="n">VoxelData</span><span class="p">.</span><span class="n">voxelTris</span><span class="p">[</span><span class="n">face</span><span class="p">,</span> <span class="n">i</span><span class="p">]]</span> <span class="p">+</span> <span class="n">pos</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// 2. 텍스쳐에 해당하는 UV 추가</span>
            <span class="nf">AddTextureUV</span><span class="p">(</span><span class="n">world</span><span class="p">.</span><span class="n">blockTypes</span><span class="p">[</span><span class="n">blockID</span><span class="p">].</span><span class="nf">GetTextureID</span><span class="p">(</span><span class="n">face</span><span class="p">));</span>

            <span class="c1">// 3. Triangle의 버텍스 인덱스 6개 추가</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>

            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
            <span class="n">triangles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">vertexIndex</span> <span class="p">+</span> <span class="m">3</span><span class="p">);</span>

            <span class="n">vertexIndex</span> <span class="p">+=</span> <span class="m">4</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<p>World 컴포넌트의 인스펙터에서 블록 타입마다 알맞은 텍스쳐 인덱스들을 넣어준다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112751783-b246f700-900a-11eb-8c82-cec2ed0476ca.png" alt="image" /></p>

<p>결과 :</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112751392-c1c54080-9008-11eb-8c6b-7aeaaca51739.png" alt="image" /></p>

<p><br /></p>

<p>각 텍스쳐 아틀라스 내에서 각 텍스쳐의 uv를 참조할 때 인접한 텍스쳐를 살짝 참조하여 위처럼 보기 좋지 않은 경계선들이 생길 수 있다.</p>

<p>이를 방지하기 위해, <code class="language-plaintext highlighter-rouge">AddTextureUV()</code> 메소드에서 각 uv의 offset을 연산하여 참조할 수 있도록 수정한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">AddTextureUV</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// 텍스쳐 내에서 의도치 않게 들어가는 부분 잘라내기</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">uvXBeginOffset</span> <span class="p">=</span> <span class="m">0.005f</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">uvXEndOffset</span>   <span class="p">=</span> <span class="m">0.005f</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">uvYBeginOffset</span> <span class="p">=</span> <span class="m">0.01f</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">uvYEndOffset</span>   <span class="p">=</span> <span class="m">0.01f</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">y</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">x</span> <span class="p">&gt;=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">TextureAtlasWidth</span> <span class="p">||</span> <span class="n">y</span> <span class="p">&gt;=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">TextureAtlasHeight</span><span class="p">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfRangeException</span><span class="p">(</span><span class="s">$"텍스쳐 아틀라스의 범위를 벗어났습니다 : [x = </span><span class="p">{</span><span class="n">x</span><span class="p">}</span><span class="s">, y = </span><span class="p">{</span><span class="n">y</span><span class="p">}</span><span class="s">]"</span><span class="p">);</span>

    <span class="kt">float</span> <span class="n">nw</span> <span class="p">=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">NormalizedTextureAtlasWidth</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">nh</span> <span class="p">=</span> <span class="n">VoxelData</span><span class="p">.</span><span class="n">NormalizedTextureAtlasHeight</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">uvX</span> <span class="p">=</span> <span class="n">x</span> <span class="p">*</span> <span class="n">nw</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">uvY</span> <span class="p">=</span> <span class="n">y</span> <span class="p">*</span> <span class="n">nh</span><span class="p">;</span>

    <span class="c1">// 해당 텍스쳐의 uv를 LB-LT-RB-RT 순서로 추가</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span> <span class="p">+</span> <span class="n">uvXBeginOffset</span><span class="p">,</span> <span class="n">uvY</span> <span class="p">+</span> <span class="n">uvYBeginOffset</span><span class="p">));</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span> <span class="p">+</span> <span class="n">uvXBeginOffset</span><span class="p">,</span> <span class="n">uvY</span> <span class="p">+</span> <span class="n">nh</span> <span class="p">-</span> <span class="n">uvYEndOffset</span><span class="p">));</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span> <span class="p">+</span> <span class="n">nw</span> <span class="p">-</span> <span class="n">uvXEndOffset</span><span class="p">,</span> <span class="n">uvY</span> <span class="p">+</span> <span class="n">uvYBeginOffset</span><span class="p">));</span>
    <span class="n">uvs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">uvX</span> <span class="p">+</span> <span class="n">nw</span> <span class="p">-</span> <span class="n">uvXEndOffset</span><span class="p">,</span> <span class="n">uvY</span> <span class="p">+</span> <span class="n">nh</span> <span class="p">-</span> <span class="n">uvYEndOffset</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>결과 :</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112751949-89733180-900b-11eb-9977-2074340123b3.png" alt="image" /></p>

<p><br /></p>

<p>그리고 블록 구성과 <code class="language-plaintext highlighter-rouge">PopulateVoxelMap()</code> 메소드를 적절히 수정하면 다음과 같은 결과를 얻을 수 있다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112752006-c808ec00-900b-11eb-86b8-03d699487325.png" alt="image" /></p>

<p><br /></p>

<h2 id="밉맵-생성하지-않게-하기"><strong>밉맵 생성하지 않게 하기</strong></h2>

<p>씬뷰에서 카메라를 이리저리 움직여보면</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/112752033-ef5fb900-900b-11eb-8975-97a6bbc7e81f.png" alt="image" /></p>

<p>간혹 이렇게 흉하게 깨져보이는 경우를 볼 수 있다.</p>

<p>이런 경우에는 텍스쳐 인스펙터에서 <code class="language-plaintext highlighter-rouge">Advanced</code> - <code class="language-plaintext highlighter-rouge">Generate Mip Maps</code>를 체크 해제하여 밉맵을 생성하지 않게 하면 된다.</p>

<p><br /></p>

<h1 id="source-code">Source Code</h1>
<hr />
<ul>
  <li><a href="https://github.com/rito15/UnityStudy2">https://github.com/rito15/UnityStudy2</a></li>
</ul>

<p><br /></p>

<h1 id="references">References</h1>
<hr />
<ul>
  <li><a href="https://www.youtube.com/playlist?list=PLVsTSlfj0qsWEJ-5eMtXsYp03Y9yF1dEn">https://www.youtube.com/playlist?list=PLVsTSlfj0qsWEJ-5eMtXsYp03Y9yF1dEn</a></li>
</ul>



      </div>

      <div class="post-tail-wrapper text-muted">

        <!-- categories -->
        
        <div class="post-meta mb-3">
          <i class="far fa-folder-open fa-fw mr-1"></i>
          
            <a href='/categories/unity/'>Unity</a>,
            <a href='/categories/unity-study/'>Unity Study</a>
        </div>
        

        <!-- tags -->
        
        <div class="post-tags">
          <i class="fa fa-tags fa-fw mr-1"></i>
          
          <a href="/tags/unity/"
            class="post-tag no-text-decoration" >unity</a>
          
          <a href="/tags/csharp/"
            class="post-tag no-text-decoration" >csharp</a>
          
          </div>
        

        <div class="post-tail-bottom
          d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
          
          <div class="license-wrapper">
            This post is licensed under
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
            by the author.
          </div>
          

          <!--
 Post sharing snippet

 v2.1
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=Voxel System - Rito15&url=https://rito15.github.io/posts/unity-study-voxel/" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=Voxel System - Rito15&u=https://rito15.github.io/posts/unity-study-voxel/" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://telegram.me/share?text=Voxel System - Rito15&url=https://rito15.github.io/posts/unity-study-voxel/" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"></i>

  </span>
</div>


        </div><!-- .post-tail-bottom -->

      </div><!-- div.post-tail -->

    </div> <!-- .post -->


  </div> <!-- #post-wrapper -->

  

  

  <!--
  The Pannel on right side (Desktop views)
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">

  <div class="access">

  














  

    <div id="access-lastmod" class="post">
      <span>Recent Update</span>
      <ul class="post-content pl-0 pb-1 ml-1 mt-2">

      
        
        
        
        <li><a href="/posts/unity-study-voxel/">Voxel System</a></li>
      
        
        
        
        <li><a href="/posts/unity-transparent-stencil/">유니티 반투명, 스텐실 개념 익히기</a></li>
      
        
        
        
        <li><a href="/posts/unity-particle-system-example-09-rainfall/">파티클 시스템 예제 - 09 - Rainfall</a></li>
      
        
        
        
        <li><a href="/posts/unity-particle-system-example-10-magic-circle/">파티클 시스템 예제 - 10 - Magic Circle</a></li>
      
        
        
        
        <li><a href="/posts/ray-marching/">레이 마칭(Ray Marching)</a></li>
      

      </ul>
    </div> <!-- #access-lastmod -->

  

  















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  
    <div id="access-tags">
      <span>Trending Tags</span>
      <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      
        
        <a class="post-tag" href="/tags/particle/">particle</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/shadergraph/">shadergraph</a>
      
        
        <a class="post-tag" href="/tags/urp/">urp</a>
      

      </div>
    </div>
  
  </div> <!-- .access -->

  
    <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
      <span class="pl-3 pt-2 mb-2">Contents</span>
      <nav id="toc" data-toggle="toc"></nav>
    </div>
  

</div> <!-- #panel-wrapper -->


</div> <!-- .row -->

<div class="row">
  <div class="col-12 col-lg-11 col-xl-8">
    <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

    <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.

 v2.0
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  
    
  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  








<!-- Fill with the other newlest posts  -->






  <div id="related-posts" class="mt-5 mb-2 mb-sm-4">
    <h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/unity-fps-tps-character/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Feb 12
  

  <i class="unloaded">2021-02-12T18:06:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>1인칭, 3인칭 전환 가능한 캐릭터 제작하기</h3>
            <div class="text-muted small">
              <p>
                





                목차



  1. 하이라키 구성
  2. 스크립트 기초
  3. 1인칭 이동, 회전
  4. 3인칭 이동, 회전
  5. 카메라 전환
  6. 점프
  7. 애니메이션 적용
  8. 애니메이션 블렌딩
  9. 카메라 전환 시 시점 방향 유지하기
  10. 3인칭 카메라 줌 구현
  11. 점프 버그 수정
  12. 이동 스크립트 분리하기
  13. ...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/unity-study-bezier-curve/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Mar 20
  

  <i class="unloaded">2021-03-20T19:19:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>베지어 곡선(Bezier Curve)</h3>
            <div class="text-muted small">
              <p>
                





                베지어 곡선



  점과 점 사이의 선형 보간(Lerp, Linear interpolation)을 이용해 그려내는 곡선




1차 베지어 곡선



  
    Linear Curve
  
  
    2개의 점
  
  
    단순히 두 점 사이의 선형 보간을 통해, 직선을 그린다.
  






2차 베지어 곡선



  
    Quadr...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/unity-physics-based-movement/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Feb 25
  

  <i class="unloaded">2021-02-25T04:11:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>물리 기반 캐릭터 이동 구현하기</h3>
            <div class="text-muted small">
              <p>
                





                목차



  1. 서론
  2. 이동 스크립트 분리
  3. 요구사항 정리
  4. 필드, 프로퍼티 정의
  5. 상태 검사 구현
  6. 중력 적용
  7. 이동 구현
  8. 물리 상호작용
  9. 구현 결과
  10. 소스 코드




서론


유니티에서 캐릭터 이동을 구현하기 위한 방법들은 다양하다.


  Transform
  Rigidbo...
              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->



    <!--
  Navigation buttons at the bottom of the post.

  v2.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->

<div class="post-navigation d-flex justify-content-between">
  
  <a href="/posts/memo-cs-prime-number/" class="btn btn-outline-primary">
    <p>Prime Number(소수)</p>
  </a>
  

  
  <span class="btn btn-outline-primary disabled">
    <p>-</p>
  </span>
  

</div>

    

    </div> <!-- #post-extend-wrapper -->

  </div> <!-- .col-* -->

</div> <!-- .row -->



  <!-- image lazy load: https://github.com/ApoorvSaxena/lozad.js -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>

<script type="text/javascript">
  const imgs = document.querySelectorAll('.post-content img');
  const observer = lozad(imgs);
  observer.observe();
</script>




        <!--
  The Footer
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<footer class="d-flex w-100 justify-content-center">
  <div class="d-flex justify-content-between align-items-center">
    <div class="footer-left">
      <p class="mb-0">
        © 2021
        <a href="https://github.com/rito15">Rito15</a>.
        
        <span data-toggle="tooltip" data-placement="top"
          title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
        
      </p>
    </div>

    <div class="footer-right">
      <p class="mb-0">
        Powered by
        <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
        with
        <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a>
        theme.
      </p>
    </div>

  </div> <!-- div.d-flex -->
</footer>


      </div>

      <!--
  The Search results
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-xl-11 post-content">
    <div id="search-hints">
      <h4 class="text-muted mb-4">Trending Tags</h4>

      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      
        
        <a class="post-tag" href="/tags/particle/">particle</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/shadergraph/">shadergraph</a>
      
        
        <a class="post-tag" href="/tags/urp/">urp</a>
      

    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    
      <!--
  mermaid-js loader
-->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(function() {
    let initTheme = "default";

    if ($("html[mode=dark]").length > 0
      || ($("html[mode]").length == 0
        && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) {
      initTheme = "dark";
    }

    let mermaidConf = {
      theme: initTheme  /* <default|dark|forest|neutral> */
    };

    /* Markdown converts to HTML */
    $("pre").has("code.language-mermaid").each(function() {
      let svgCode = $(this).children().html();
      $(this).addClass("unloaded");
      $(this).after(`<div class=\"mermaid\">${svgCode}</div>`);
    });

    mermaid.initialize(mermaidConf);
  });
</script>

    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    <!--
  Jekyll Simple Search loader
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="https://rito15.github.io{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    <div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div>    <div><i class="fa fa-tag fa-fw"></i>{tags}</div>  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No result founds.</p>'
});
</script>


  </body>

</html>

