---
title: 유니티 안드로이드 권한 요청하기
author: Rito15
date: 2021-09-07 16:50:00 +09:00
categories: [Unity, Unity Android Memo]
tags: [unity, android, memo]
math: true
mermaid: true
---

# Memo
---
- 안드로이드의 카메라, 로컬 스토리지 등의 기능을 사용하려면 권한을 반드시 요청해야 한다.
- Android 6(API Lv.23) 이상에서는 `Android.Permission` API를 통해 런타임에 권한을 요청할 수 있다.

<br>

# 공통(권한 
---

## **안드로이드 매니페스트 파일 경로**

- 구글링하면 대부분 나오는 `Root/Temp/StagingArea/AndroidManifest.xml` 경로는 `2019.3` 미만 버전이다.

- `2019.3` 이상부터는 `Root/Temp/gradleOut/unityLibrary/src/main/AndroidManifest.xml` 이다.

<br>

## **안드로이드 매니페스트 오버라이드하기**

- 위에서 찾은 파일을 `Assets/Plugins/Android/AndroidManifest.xml`로 가져온다.

<br>

## **권한 추가하기**

- 가져온 `xml` 파일을 열면 다음과 같은 내용을 확인할 수 있다.

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.unity3d.player" xmlns:tools="http://schemas.android.com/tools">
  <application>
    <activity ...>
      ...
    </activity>
    <meta-data android:name="unity.splash-mode" android:value="0" />
    ...
  </application>
  <uses-feature android:glEsVersion="0x00030000" />
  ...
  [HERE]
</manifest>
```

- 위의 `[HERE]` 부분에 다음과 같이 한 줄씩 작성하여 권한을 추가할 수 있다.

```
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
  <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
```

- 이렇게 권한을 추가하면 앱 실행 시 해당 권한들을 허용할지 여부를 묻는 창이 뜬다.

<br>

## **권한 종류**

- <https://developer.android.com/reference/android/Manifest.permission>
- <https://crazykim2.tistory.com/487>
- <https://s262701-id.tistory.com/96>

|권한|설명|
|---|---|
|WRITE_EXTERNAL_STORAGE|외부 저장소에 파일 쓰기|
|READ_EXTERNAL_STORAGE|외부 저장소에서 파일 읽어오기|
|CAMERA|카메라|
|RECORD_AUDIO|마이크, 녹음|
|ACCESS_NETWORK_STATE|네트워크 연결 상태 확인|
|INTERNET|인터넷 사용|
|ACCESS_FINE_LOCATION|위치 정보(GPS)|
|ACCESS_MOCK_LOCATION|위치 정보(테스트용)|

<br>

# 런타임 권한 요청(Android 6 이상)
---



<br>

# References
---
- <https://docs.unity3d.com/kr/2020.3/Manual/android-manifest.html>
- <https://docs.unity3d.com/kr/2020.3/Manual/android-RequestingPermissions.html>